{"ast":null,"code":"import { watch, isRef, onUnmounted } from 'vue';\nimport getScrollBarWidth from 'element-plus/es/utils/scrollbar-width';\nimport { throwError } from 'element-plus/es/utils/error';\nimport { addClass, removeClass, hasClass, getStyle } from 'element-plus/es/utils/dom';\nexport default (trigger => {\n  if (!isRef(trigger)) {\n    throwError('[useLockScreen]', 'You need to pass a ref param to this function');\n  }\n\n  let scrollBarWidth = 0;\n  let withoutHiddenClass = false;\n  let bodyPaddingRight = '0';\n  let computedBodyPaddingRight = 0;\n  onUnmounted(() => {\n    cleanup();\n  });\n\n  const cleanup = () => {\n    removeClass(document.body, 'el-popup-parent--hidden');\n\n    if (withoutHiddenClass) {\n      document.body.style.paddingRight = bodyPaddingRight;\n    }\n  };\n\n  watch(trigger, val => {\n    if (val) {\n      withoutHiddenClass = !hasClass(document.body, 'el-popup-parent--hidden');\n\n      if (withoutHiddenClass) {\n        bodyPaddingRight = document.body.style.paddingRight;\n        computedBodyPaddingRight = parseInt(getStyle(document.body, 'paddingRight'), 10);\n      }\n\n      scrollBarWidth = getScrollBarWidth();\n      const bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;\n      const bodyOverflowY = getStyle(document.body, 'overflowY');\n\n      if (scrollBarWidth > 0 && (bodyHasOverflow || bodyOverflowY === 'scroll') && withoutHiddenClass) {\n        document.body.style.paddingRight = `${computedBodyPaddingRight + scrollBarWidth}px`;\n      }\n\n      addClass(document.body, 'el-popup-parent--hidden');\n    } else {\n      cleanup();\n    }\n  });\n});","map":{"version":3,"names":["watch","isRef","onUnmounted","getScrollBarWidth","throwError","addClass","removeClass","hasClass","getStyle","trigger","scrollBarWidth","withoutHiddenClass","bodyPaddingRight","computedBodyPaddingRight","cleanup","document","body","style","paddingRight","val","parseInt","bodyHasOverflow","documentElement","clientHeight","scrollHeight","bodyOverflowY"],"sources":["/home/haibara/ghq/github.com/w-haibara/kakemoti-ui/node_modules/element-plus/es/hooks/use-lockscreen/index.js"],"sourcesContent":["import { watch, isRef, onUnmounted } from 'vue';\nimport getScrollBarWidth from 'element-plus/es/utils/scrollbar-width';\nimport { throwError } from 'element-plus/es/utils/error';\nimport { addClass, removeClass, hasClass, getStyle, } from 'element-plus/es/utils/dom';\nexport default (trigger) => {\n    if (!isRef(trigger)) {\n        throwError('[useLockScreen]', 'You need to pass a ref param to this function');\n    }\n    let scrollBarWidth = 0;\n    let withoutHiddenClass = false;\n    let bodyPaddingRight = '0';\n    let computedBodyPaddingRight = 0;\n    onUnmounted(() => {\n        cleanup();\n    });\n    const cleanup = () => {\n        removeClass(document.body, 'el-popup-parent--hidden');\n        if (withoutHiddenClass) {\n            document.body.style.paddingRight = bodyPaddingRight;\n        }\n    };\n    watch(trigger, (val) => {\n        if (val) {\n            withoutHiddenClass = !hasClass(document.body, 'el-popup-parent--hidden');\n            if (withoutHiddenClass) {\n                bodyPaddingRight = document.body.style.paddingRight;\n                computedBodyPaddingRight = parseInt(getStyle(document.body, 'paddingRight'), 10);\n            }\n            scrollBarWidth = getScrollBarWidth();\n            const bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;\n            const bodyOverflowY = getStyle(document.body, 'overflowY');\n            if (scrollBarWidth > 0 &&\n                (bodyHasOverflow || bodyOverflowY === 'scroll') &&\n                withoutHiddenClass) {\n                document.body.style.paddingRight = `${computedBodyPaddingRight + scrollBarWidth}px`;\n            }\n            addClass(document.body, 'el-popup-parent--hidden');\n        }\n        else {\n            cleanup();\n        }\n    });\n};\n"],"mappings":"AAAA,SAASA,KAAT,EAAgBC,KAAhB,EAAuBC,WAAvB,QAA0C,KAA1C;AACA,OAAOC,iBAAP,MAA8B,uCAA9B;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,QAAhC,EAA0CC,QAA1C,QAA2D,2BAA3D;AACA,gBAAgBC,OAAD,IAAa;EACxB,IAAI,CAACR,KAAK,CAACQ,OAAD,CAAV,EAAqB;IACjBL,UAAU,CAAC,iBAAD,EAAoB,+CAApB,CAAV;EACH;;EACD,IAAIM,cAAc,GAAG,CAArB;EACA,IAAIC,kBAAkB,GAAG,KAAzB;EACA,IAAIC,gBAAgB,GAAG,GAAvB;EACA,IAAIC,wBAAwB,GAAG,CAA/B;EACAX,WAAW,CAAC,MAAM;IACdY,OAAO;EACV,CAFU,CAAX;;EAGA,MAAMA,OAAO,GAAG,MAAM;IAClBR,WAAW,CAACS,QAAQ,CAACC,IAAV,EAAgB,yBAAhB,CAAX;;IACA,IAAIL,kBAAJ,EAAwB;MACpBI,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,YAApB,GAAmCN,gBAAnC;IACH;EACJ,CALD;;EAMAZ,KAAK,CAACS,OAAD,EAAWU,GAAD,IAAS;IACpB,IAAIA,GAAJ,EAAS;MACLR,kBAAkB,GAAG,CAACJ,QAAQ,CAACQ,QAAQ,CAACC,IAAV,EAAgB,yBAAhB,CAA9B;;MACA,IAAIL,kBAAJ,EAAwB;QACpBC,gBAAgB,GAAGG,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,YAAvC;QACAL,wBAAwB,GAAGO,QAAQ,CAACZ,QAAQ,CAACO,QAAQ,CAACC,IAAV,EAAgB,cAAhB,CAAT,EAA0C,EAA1C,CAAnC;MACH;;MACDN,cAAc,GAAGP,iBAAiB,EAAlC;MACA,MAAMkB,eAAe,GAAGN,QAAQ,CAACO,eAAT,CAAyBC,YAAzB,GAAwCR,QAAQ,CAACC,IAAT,CAAcQ,YAA9E;MACA,MAAMC,aAAa,GAAGjB,QAAQ,CAACO,QAAQ,CAACC,IAAV,EAAgB,WAAhB,CAA9B;;MACA,IAAIN,cAAc,GAAG,CAAjB,KACCW,eAAe,IAAII,aAAa,KAAK,QADtC,KAEAd,kBAFJ,EAEwB;QACpBI,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,YAApB,GAAoC,GAAEL,wBAAwB,GAAGH,cAAe,IAAhF;MACH;;MACDL,QAAQ,CAACU,QAAQ,CAACC,IAAV,EAAgB,yBAAhB,CAAR;IACH,CAfD,MAgBK;MACDF,OAAO;IACV;EACJ,CApBI,CAAL;AAqBH,CAtCD"},"metadata":{},"sourceType":"module"}