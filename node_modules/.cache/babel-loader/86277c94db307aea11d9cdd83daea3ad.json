{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { on } from 'element-plus/es/utils/dom';\nimport isServer from 'element-plus/es/utils/isServer';\nconst nodeList = new Map();\nlet startClick;\n\nif (!isServer) {\n  on(document, 'mousedown', e => startClick = e);\n  on(document, 'mouseup', e => {\n    for (const handlers of nodeList.values()) {\n      for (const {\n        documentHandler\n      } of handlers) {\n        documentHandler(e, startClick);\n      }\n    }\n  });\n}\n\nfunction createDocumentHandler(el, binding) {\n  let excludes = [];\n\n  if (Array.isArray(binding.arg)) {\n    excludes = binding.arg;\n  } else if (binding.arg instanceof HTMLElement) {\n    excludes.push(binding.arg);\n  }\n\n  return function (mouseup, mousedown) {\n    const popperRef = binding.instance.popperRef;\n    const mouseUpTarget = mouseup.target;\n    const mouseDownTarget = mousedown === null || mousedown === void 0 ? void 0 : mousedown.target;\n    const isBound = !binding || !binding.instance;\n    const isTargetExists = !mouseUpTarget || !mouseDownTarget;\n    const isContainedByEl = el.contains(mouseUpTarget) || el.contains(mouseDownTarget);\n    const isSelf = el === mouseUpTarget;\n    const isTargetExcluded = excludes.length && excludes.some(item => item === null || item === void 0 ? void 0 : item.contains(mouseUpTarget)) || excludes.length && excludes.includes(mouseDownTarget);\n    const isContainedByPopper = popperRef && (popperRef.contains(mouseUpTarget) || popperRef.contains(mouseDownTarget));\n\n    if (isBound || isTargetExists || isContainedByEl || isSelf || isTargetExcluded || isContainedByPopper) {\n      return;\n    }\n\n    binding.value(mouseup, mousedown);\n  };\n}\n\nconst ClickOutside = {\n  beforeMount(el, binding) {\n    if (!nodeList.has(el)) {\n      nodeList.set(el, []);\n    }\n\n    nodeList.get(el).push({\n      documentHandler: createDocumentHandler(el, binding),\n      bindingFn: binding.value\n    });\n  },\n\n  updated(el, binding) {\n    if (!nodeList.has(el)) {\n      nodeList.set(el, []);\n    }\n\n    const handlers = nodeList.get(el);\n    const oldHandlerIndex = handlers.findIndex(item => item.bindingFn === binding.oldValue);\n    const newHandler = {\n      documentHandler: createDocumentHandler(el, binding),\n      bindingFn: binding.value\n    };\n\n    if (oldHandlerIndex >= 0) {\n      handlers.splice(oldHandlerIndex, 1, newHandler);\n    } else {\n      handlers.push(newHandler);\n    }\n  },\n\n  unmounted(el) {\n    nodeList.delete(el);\n  }\n\n};\nexport default ClickOutside;","map":{"version":3,"names":["on","isServer","nodeList","Map","startClick","document","e","handlers","values","documentHandler","createDocumentHandler","el","binding","excludes","Array","isArray","arg","HTMLElement","push","mouseup","mousedown","popperRef","instance","mouseUpTarget","target","mouseDownTarget","isBound","isTargetExists","isContainedByEl","contains","isSelf","isTargetExcluded","length","some","item","includes","isContainedByPopper","value","ClickOutside","beforeMount","has","set","get","bindingFn","updated","oldHandlerIndex","findIndex","oldValue","newHandler","splice","unmounted","delete"],"sources":["/home/haibara/ghq/github.com/w-haibara/kakemoti-ui/node_modules/element-plus/es/directives/click-outside/index.js"],"sourcesContent":["import { on } from 'element-plus/es/utils/dom';\nimport isServer from 'element-plus/es/utils/isServer';\nconst nodeList = new Map();\nlet startClick;\nif (!isServer) {\n    on(document, 'mousedown', (e) => (startClick = e));\n    on(document, 'mouseup', (e) => {\n        for (const handlers of nodeList.values()) {\n            for (const { documentHandler } of handlers) {\n                documentHandler(e, startClick);\n            }\n        }\n    });\n}\nfunction createDocumentHandler(el, binding) {\n    let excludes = [];\n    if (Array.isArray(binding.arg)) {\n        excludes = binding.arg;\n    }\n    else if (binding.arg instanceof HTMLElement) {\n        excludes.push(binding.arg);\n    }\n    return function (mouseup, mousedown) {\n        const popperRef = binding.instance.popperRef;\n        const mouseUpTarget = mouseup.target;\n        const mouseDownTarget = mousedown === null || mousedown === void 0 ? void 0 : mousedown.target;\n        const isBound = !binding || !binding.instance;\n        const isTargetExists = !mouseUpTarget || !mouseDownTarget;\n        const isContainedByEl = el.contains(mouseUpTarget) || el.contains(mouseDownTarget);\n        const isSelf = el === mouseUpTarget;\n        const isTargetExcluded = (excludes.length &&\n            excludes.some((item) => item === null || item === void 0 ? void 0 : item.contains(mouseUpTarget))) ||\n            (excludes.length && excludes.includes(mouseDownTarget));\n        const isContainedByPopper = popperRef &&\n            (popperRef.contains(mouseUpTarget) || popperRef.contains(mouseDownTarget));\n        if (isBound ||\n            isTargetExists ||\n            isContainedByEl ||\n            isSelf ||\n            isTargetExcluded ||\n            isContainedByPopper) {\n            return;\n        }\n        binding.value(mouseup, mousedown);\n    };\n}\nconst ClickOutside = {\n    beforeMount(el, binding) {\n        if (!nodeList.has(el)) {\n            nodeList.set(el, []);\n        }\n        nodeList.get(el).push({\n            documentHandler: createDocumentHandler(el, binding),\n            bindingFn: binding.value,\n        });\n    },\n    updated(el, binding) {\n        if (!nodeList.has(el)) {\n            nodeList.set(el, []);\n        }\n        const handlers = nodeList.get(el);\n        const oldHandlerIndex = handlers.findIndex((item) => item.bindingFn === binding.oldValue);\n        const newHandler = {\n            documentHandler: createDocumentHandler(el, binding),\n            bindingFn: binding.value,\n        };\n        if (oldHandlerIndex >= 0) {\n            handlers.splice(oldHandlerIndex, 1, newHandler);\n        }\n        else {\n            handlers.push(newHandler);\n        }\n    },\n    unmounted(el) {\n        nodeList.delete(el);\n    },\n};\nexport default ClickOutside;\n"],"mappings":";AAAA,SAASA,EAAT,QAAmB,2BAAnB;AACA,OAAOC,QAAP,MAAqB,gCAArB;AACA,MAAMC,QAAQ,GAAG,IAAIC,GAAJ,EAAjB;AACA,IAAIC,UAAJ;;AACA,IAAI,CAACH,QAAL,EAAe;EACXD,EAAE,CAACK,QAAD,EAAW,WAAX,EAAyBC,CAAD,IAAQF,UAAU,GAAGE,CAA7C,CAAF;EACAN,EAAE,CAACK,QAAD,EAAW,SAAX,EAAuBC,CAAD,IAAO;IAC3B,KAAK,MAAMC,QAAX,IAAuBL,QAAQ,CAACM,MAAT,EAAvB,EAA0C;MACtC,KAAK,MAAM;QAAEC;MAAF,CAAX,IAAkCF,QAAlC,EAA4C;QACxCE,eAAe,CAACH,CAAD,EAAIF,UAAJ,CAAf;MACH;IACJ;EACJ,CANC,CAAF;AAOH;;AACD,SAASM,qBAAT,CAA+BC,EAA/B,EAAmCC,OAAnC,EAA4C;EACxC,IAAIC,QAAQ,GAAG,EAAf;;EACA,IAAIC,KAAK,CAACC,OAAN,CAAcH,OAAO,CAACI,GAAtB,CAAJ,EAAgC;IAC5BH,QAAQ,GAAGD,OAAO,CAACI,GAAnB;EACH,CAFD,MAGK,IAAIJ,OAAO,CAACI,GAAR,YAAuBC,WAA3B,EAAwC;IACzCJ,QAAQ,CAACK,IAAT,CAAcN,OAAO,CAACI,GAAtB;EACH;;EACD,OAAO,UAAUG,OAAV,EAAmBC,SAAnB,EAA8B;IACjC,MAAMC,SAAS,GAAGT,OAAO,CAACU,QAAR,CAAiBD,SAAnC;IACA,MAAME,aAAa,GAAGJ,OAAO,CAACK,MAA9B;IACA,MAAMC,eAAe,GAAGL,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAACI,MAAxF;IACA,MAAME,OAAO,GAAG,CAACd,OAAD,IAAY,CAACA,OAAO,CAACU,QAArC;IACA,MAAMK,cAAc,GAAG,CAACJ,aAAD,IAAkB,CAACE,eAA1C;IACA,MAAMG,eAAe,GAAGjB,EAAE,CAACkB,QAAH,CAAYN,aAAZ,KAA8BZ,EAAE,CAACkB,QAAH,CAAYJ,eAAZ,CAAtD;IACA,MAAMK,MAAM,GAAGnB,EAAE,KAAKY,aAAtB;IACA,MAAMQ,gBAAgB,GAAIlB,QAAQ,CAACmB,MAAT,IACtBnB,QAAQ,CAACoB,IAAT,CAAeC,IAAD,IAAUA,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACL,QAAL,CAAcN,aAAd,CAApE,CADqB,IAEpBV,QAAQ,CAACmB,MAAT,IAAmBnB,QAAQ,CAACsB,QAAT,CAAkBV,eAAlB,CAFxB;IAGA,MAAMW,mBAAmB,GAAGf,SAAS,KAChCA,SAAS,CAACQ,QAAV,CAAmBN,aAAnB,KAAqCF,SAAS,CAACQ,QAAV,CAAmBJ,eAAnB,CADL,CAArC;;IAEA,IAAIC,OAAO,IACPC,cADA,IAEAC,eAFA,IAGAE,MAHA,IAIAC,gBAJA,IAKAK,mBALJ,EAKyB;MACrB;IACH;;IACDxB,OAAO,CAACyB,KAAR,CAAclB,OAAd,EAAuBC,SAAvB;EACH,CAtBD;AAuBH;;AACD,MAAMkB,YAAY,GAAG;EACjBC,WAAW,CAAC5B,EAAD,EAAKC,OAAL,EAAc;IACrB,IAAI,CAACV,QAAQ,CAACsC,GAAT,CAAa7B,EAAb,CAAL,EAAuB;MACnBT,QAAQ,CAACuC,GAAT,CAAa9B,EAAb,EAAiB,EAAjB;IACH;;IACDT,QAAQ,CAACwC,GAAT,CAAa/B,EAAb,EAAiBO,IAAjB,CAAsB;MAClBT,eAAe,EAAEC,qBAAqB,CAACC,EAAD,EAAKC,OAAL,CADpB;MAElB+B,SAAS,EAAE/B,OAAO,CAACyB;IAFD,CAAtB;EAIH,CATgB;;EAUjBO,OAAO,CAACjC,EAAD,EAAKC,OAAL,EAAc;IACjB,IAAI,CAACV,QAAQ,CAACsC,GAAT,CAAa7B,EAAb,CAAL,EAAuB;MACnBT,QAAQ,CAACuC,GAAT,CAAa9B,EAAb,EAAiB,EAAjB;IACH;;IACD,MAAMJ,QAAQ,GAAGL,QAAQ,CAACwC,GAAT,CAAa/B,EAAb,CAAjB;IACA,MAAMkC,eAAe,GAAGtC,QAAQ,CAACuC,SAAT,CAAoBZ,IAAD,IAAUA,IAAI,CAACS,SAAL,KAAmB/B,OAAO,CAACmC,QAAxD,CAAxB;IACA,MAAMC,UAAU,GAAG;MACfvC,eAAe,EAAEC,qBAAqB,CAACC,EAAD,EAAKC,OAAL,CADvB;MAEf+B,SAAS,EAAE/B,OAAO,CAACyB;IAFJ,CAAnB;;IAIA,IAAIQ,eAAe,IAAI,CAAvB,EAA0B;MACtBtC,QAAQ,CAAC0C,MAAT,CAAgBJ,eAAhB,EAAiC,CAAjC,EAAoCG,UAApC;IACH,CAFD,MAGK;MACDzC,QAAQ,CAACW,IAAT,CAAc8B,UAAd;IACH;EACJ,CA1BgB;;EA2BjBE,SAAS,CAACvC,EAAD,EAAK;IACVT,QAAQ,CAACiD,MAAT,CAAgBxC,EAAhB;EACH;;AA7BgB,CAArB;AA+BA,eAAe2B,YAAf"},"metadata":{},"sourceType":"module"}