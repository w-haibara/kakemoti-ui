{"ast":null,"code":"import { computed, getCurrentInstance, inject, provide, ref } from 'vue';\nimport English from 'element-plus/es/locale/lang/en';\nexport const useLocaleProps = {\n  locale: {\n    type: Object\n  }\n};\nexport const LocaleInjectionKey = 'ElLocaleInjection';\nlet localeObjCache;\n\nfunction translate(path, option, current) {\n  const paths = path.split('.');\n  let value;\n\n  for (let i = 0, j = paths.length; i < j; i++) {\n    const property = paths[i];\n    value = current[property];\n    if (i === j - 1) return template(value, option);\n    if (!value) return '';\n    current = value;\n  }\n}\n\nexport const useLocale = () => {\n  const vm = getCurrentInstance();\n  const props = vm.props;\n  const locale = computed(() => props.locale || English);\n  const lang = computed(() => locale.value.name);\n\n  const _translator = (...args) => {\n    const [path, option] = args;\n    return translate(path, option, locale.value);\n  };\n\n  const t = (...args) => {\n    return _translator(...args);\n  };\n\n  const provides = {\n    locale,\n    lang,\n    t\n  };\n  localeObjCache = provides;\n  provide(LocaleInjectionKey, provides);\n};\n\nfunction template(str, option) {\n  if (!str || !option) return str;\n  return str.replace(/\\{(\\w+)\\}/g, (_, key) => {\n    return option[key];\n  });\n}\n\nexport const localeProviderMaker = (locale = English) => {\n  const lang = ref(locale.name);\n  const localeRef = ref(locale);\n  return {\n    lang,\n    locale: localeRef,\n    t: (...args) => {\n      const [path, option] = args;\n      return translate(path, option, localeRef.value);\n    }\n  };\n};\nexport const useLocaleInject = () => {\n  return inject(LocaleInjectionKey, localeObjCache || {\n    lang: ref(English.name),\n    locale: ref(English),\n    t: (...args) => {\n      const [path, option] = args;\n      return translate(path, option, English);\n    }\n  });\n};","map":{"version":3,"names":["computed","getCurrentInstance","inject","provide","ref","English","useLocaleProps","locale","type","Object","LocaleInjectionKey","localeObjCache","translate","path","option","current","paths","split","value","i","j","length","property","template","useLocale","vm","props","lang","name","_translator","args","t","provides","str","replace","_","key","localeProviderMaker","localeRef","useLocaleInject"],"sources":["/home/haibara/ghq/github.com/w-haibara/kakemoti-ui/node_modules/element-plus/es/hooks/use-locale/index.js"],"sourcesContent":["import { computed, getCurrentInstance, inject, provide, ref } from 'vue';\nimport English from 'element-plus/es/locale/lang/en';\nexport const useLocaleProps = {\n    locale: {\n        type: Object,\n    },\n};\nexport const LocaleInjectionKey = 'ElLocaleInjection';\nlet localeObjCache;\nfunction translate(path, option, current) {\n    const paths = path.split('.');\n    let value;\n    for (let i = 0, j = paths.length; i < j; i++) {\n        const property = paths[i];\n        value = current[property];\n        if (i === j - 1)\n            return template(value, option);\n        if (!value)\n            return '';\n        current = value;\n    }\n}\nexport const useLocale = () => {\n    const vm = getCurrentInstance();\n    const props = vm.props;\n    const locale = computed(() => props.locale || English);\n    const lang = computed(() => locale.value.name);\n    const _translator = (...args) => {\n        const [path, option] = args;\n        return translate(path, option, locale.value);\n    };\n    const t = (...args) => {\n        return _translator(...args);\n    };\n    const provides = {\n        locale,\n        lang,\n        t,\n    };\n    localeObjCache = provides;\n    provide(LocaleInjectionKey, provides);\n};\nfunction template(str, option) {\n    if (!str || !option)\n        return str;\n    return str.replace(/\\{(\\w+)\\}/g, (_, key) => {\n        return option[key];\n    });\n}\nexport const localeProviderMaker = (locale = English) => {\n    const lang = ref(locale.name);\n    const localeRef = ref(locale);\n    return {\n        lang,\n        locale: localeRef,\n        t: (...args) => {\n            const [path, option] = args;\n            return translate(path, option, localeRef.value);\n        },\n    };\n};\nexport const useLocaleInject = () => {\n    return inject(LocaleInjectionKey, localeObjCache || {\n        lang: ref(English.name),\n        locale: ref(English),\n        t: (...args) => {\n            const [path, option] = args;\n            return translate(path, option, English);\n        },\n    });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}