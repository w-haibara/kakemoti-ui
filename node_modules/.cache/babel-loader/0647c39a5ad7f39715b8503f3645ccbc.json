{"ast":null,"code":"import { withInstall, withNoopInstall } from 'element-plus/es/utils/with-install';\nimport { defineComponent, watch, reactive, toRefs, provide, ref, computed, openBlock, createElementBlock, normalizeClass, renderSlot, inject, onMounted, onUpdated, onBeforeUnmount, nextTick, h, Fragment, getCurrentInstance, resolveComponent, createVNode, withCtx, normalizeStyle, createTextVNode, toDisplayString, createCommentVNode, createElementVNode, Transition } from 'vue';\nimport { elFormKey, elFormItemKey } from 'element-plus/es/tokens';\nimport { debugWarn } from 'element-plus/es/utils/error';\nimport { NOOP } from '@vue/shared';\nimport AsyncValidator from 'async-validator';\nimport { useGlobalConfig, addUnit, getPropByPath } from 'element-plus/es/utils/util';\nimport { isValidComponentSize } from 'element-plus/es/utils/validators';\nimport { addResizeListener, removeResizeListener } from 'element-plus/es/utils/resize-event';\nvar __defProp$1 = Object.defineProperty;\nvar __defProps$1 = Object.defineProperties;\nvar __getOwnPropDescs$1 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues$1 = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp$1.call(b, prop)) __defNormalProp$1(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols$1) for (var prop of __getOwnPropSymbols$1(b)) {\n    if (__propIsEnum$1.call(b, prop)) __defNormalProp$1(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps$1 = (a, b) => __defProps$1(a, __getOwnPropDescs$1(b));\n\nfunction useFormLabelWidth() {\n  const potentialLabelWidthArr = ref([]);\n  const autoLabelWidth = computed(() => {\n    if (!potentialLabelWidthArr.value.length) return \"0\";\n    const max = Math.max(...potentialLabelWidthArr.value);\n    return max ? `${max}px` : \"\";\n  });\n\n  function getLabelWidthIndex(width) {\n    const index = potentialLabelWidthArr.value.indexOf(width);\n\n    if (index === -1) {\n      debugWarn(\"Form\", `unexpected width ${width}`);\n    }\n\n    return index;\n  }\n\n  function registerLabelWidth(val, oldVal) {\n    if (val && oldVal) {\n      const index = getLabelWidthIndex(oldVal);\n      potentialLabelWidthArr.value.splice(index, 1, val);\n    } else if (val) {\n      potentialLabelWidthArr.value.push(val);\n    }\n  }\n\n  function deregisterLabelWidth(val) {\n    const index = getLabelWidthIndex(val);\n    index > -1 && potentialLabelWidthArr.value.splice(index, 1);\n  }\n\n  return {\n    autoLabelWidth,\n    registerLabelWidth,\n    deregisterLabelWidth\n  };\n}\n\nvar script$1 = defineComponent({\n  name: \"ElForm\",\n  props: {\n    model: Object,\n    rules: Object,\n    labelPosition: String,\n    labelWidth: {\n      type: [String, Number],\n      default: \"\"\n    },\n    labelSuffix: {\n      type: String,\n      default: \"\"\n    },\n    inline: Boolean,\n    inlineMessage: Boolean,\n    statusIcon: Boolean,\n    showMessage: {\n      type: Boolean,\n      default: true\n    },\n    size: String,\n    disabled: Boolean,\n    validateOnRuleChange: {\n      type: Boolean,\n      default: true\n    },\n    hideRequiredAsterisk: {\n      type: Boolean,\n      default: false\n    },\n    scrollToError: Boolean\n  },\n  emits: [\"validate\"],\n\n  setup(props, {\n    emit\n  }) {\n    const fields = [];\n    watch(() => props.rules, () => {\n      fields.forEach(field => {\n        field.evaluateValidationEnabled();\n      });\n\n      if (props.validateOnRuleChange) {\n        validate(() => ({}));\n      }\n    });\n\n    const addField = field => {\n      if (field) {\n        fields.push(field);\n      }\n    };\n\n    const removeField = field => {\n      if (field.prop) {\n        fields.splice(fields.indexOf(field), 1);\n      }\n    };\n\n    const resetFields = () => {\n      if (!props.model) {\n        debugWarn(\"Form\", \"model is required for resetFields to work.\");\n        return;\n      }\n\n      fields.forEach(field => {\n        field.resetField();\n      });\n    };\n\n    const clearValidate = (props2 = []) => {\n      const fds = props2.length ? typeof props2 === \"string\" ? fields.filter(field => props2 === field.prop) : fields.filter(field => props2.indexOf(field.prop) > -1) : fields;\n      fds.forEach(field => {\n        field.clearValidate();\n      });\n    };\n\n    const validate = callback => {\n      if (!props.model) {\n        debugWarn(\"Form\", \"model is required for validate to work!\");\n        return;\n      }\n\n      let promise;\n\n      if (typeof callback !== \"function\") {\n        promise = new Promise((resolve, reject) => {\n          callback = function (valid2, invalidFields2) {\n            if (valid2) {\n              resolve(true);\n            } else {\n              reject(invalidFields2);\n            }\n          };\n        });\n      }\n\n      if (fields.length === 0) {\n        callback(true);\n      }\n\n      let valid = true;\n      let count = 0;\n      let invalidFields = {};\n      let firstInvalidFields;\n\n      for (const field of fields) {\n        field.validate(\"\", (message, field2) => {\n          if (message) {\n            valid = false;\n            firstInvalidFields || (firstInvalidFields = field2);\n          }\n\n          invalidFields = __spreadValues$1(__spreadValues$1({}, invalidFields), field2);\n\n          if (++count === fields.length) {\n            callback(valid, invalidFields);\n          }\n        });\n      }\n\n      if (!valid && props.scrollToError) {\n        scrollToField(Object.keys(firstInvalidFields)[0]);\n      }\n\n      return promise;\n    };\n\n    const validateField = (props2, cb) => {\n      props2 = [].concat(props2);\n      const fds = fields.filter(field => props2.indexOf(field.prop) !== -1);\n\n      if (!fields.length) {\n        debugWarn(\"Form\", \"please pass correct props!\");\n        return;\n      }\n\n      fds.forEach(field => {\n        field.validate(\"\", cb);\n      });\n    };\n\n    const scrollToField = prop => {\n      fields.forEach(item => {\n        if (item.prop === prop) {\n          item.$el.scrollIntoView();\n        }\n      });\n    };\n\n    const elForm = reactive(__spreadValues$1(__spreadProps$1(__spreadValues$1({}, toRefs(props)), {\n      resetFields,\n      clearValidate,\n      validateField,\n      emit,\n      addField,\n      removeField\n    }), useFormLabelWidth()));\n    provide(elFormKey, elForm);\n    return {\n      validate,\n      resetFields,\n      clearValidate,\n      validateField,\n      scrollToField\n    };\n  }\n\n});\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"form\", {\n    class: normalizeClass([\"el-form\", [_ctx.labelPosition ? \"el-form--label-\" + _ctx.labelPosition : \"\", {\n      \"el-form--inline\": _ctx.inline\n    }]])\n  }, [renderSlot(_ctx.$slots, \"default\")], 2);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/components/form/src/form.vue\";\nvar LabelWrap = defineComponent({\n  name: \"ElLabelWrap\",\n  props: {\n    isAutoWidth: Boolean,\n    updateAll: Boolean\n  },\n\n  setup(props, {\n    slots\n  }) {\n    const el = ref(null);\n    const elForm = inject(elFormKey);\n    const elFormItem = inject(elFormItemKey);\n    const computedWidth = ref(0);\n    watch(computedWidth, (val, oldVal) => {\n      if (props.updateAll) {\n        elForm.registerLabelWidth(val, oldVal);\n        elFormItem.updateComputedLabelWidth(val);\n      }\n    });\n\n    const getLabelWidth = () => {\n      var _a;\n\n      if ((_a = el.value) == null ? void 0 : _a.firstElementChild) {\n        const width = window.getComputedStyle(el.value.firstElementChild).width;\n        return Math.ceil(parseFloat(width));\n      } else {\n        return 0;\n      }\n    };\n\n    const updateLabelWidth = (action = \"update\") => {\n      nextTick(() => {\n        if (slots.default && props.isAutoWidth) {\n          if (action === \"update\") {\n            computedWidth.value = getLabelWidth();\n          } else if (action === \"remove\") {\n            elForm.deregisterLabelWidth(computedWidth.value);\n          }\n        }\n      });\n    };\n\n    const updateLabelWidthFn = () => updateLabelWidth(\"update\");\n\n    onMounted(() => {\n      addResizeListener(el.value.firstElementChild, updateLabelWidthFn);\n      updateLabelWidthFn();\n    });\n    onUpdated(updateLabelWidthFn);\n    onBeforeUnmount(() => {\n      var _a;\n\n      updateLabelWidth(\"remove\");\n      removeResizeListener((_a = el.value) == null ? void 0 : _a.firstElementChild, updateLabelWidthFn);\n    });\n\n    function render() {\n      var _a, _b;\n\n      if (!slots) return null;\n\n      if (props.isAutoWidth) {\n        const autoLabelWidth = elForm.autoLabelWidth;\n        const style = {};\n\n        if (autoLabelWidth && autoLabelWidth !== \"auto\") {\n          const marginWidth = Math.max(0, parseInt(autoLabelWidth, 10) - computedWidth.value);\n          const marginPosition = elForm.labelPosition === \"left\" ? \"marginRight\" : \"marginLeft\";\n\n          if (marginWidth) {\n            style[marginPosition] = `${marginWidth}px`;\n          }\n        }\n\n        return h(\"div\", {\n          ref: el,\n          class: [\"el-form-item__label-wrap\"],\n          style\n        }, (_a = slots.default) == null ? void 0 : _a.call(slots));\n      } else {\n        return h(Fragment, {\n          ref: el\n        }, (_b = slots.default) == null ? void 0 : _b.call(slots));\n      }\n    }\n\n    return render;\n  }\n\n});\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nvar script = defineComponent({\n  name: \"ElFormItem\",\n  componentName: \"ElFormItem\",\n  components: {\n    LabelWrap\n  },\n  props: {\n    label: String,\n    labelWidth: {\n      type: [String, Number],\n      default: \"\"\n    },\n    prop: String,\n    required: {\n      type: Boolean,\n      default: void 0\n    },\n    rules: [Object, Array],\n    error: String,\n    validateStatus: String,\n    for: String,\n    inlineMessage: {\n      type: [String, Boolean],\n      default: \"\"\n    },\n    showMessage: {\n      type: Boolean,\n      default: true\n    },\n    size: {\n      type: String,\n      validator: isValidComponentSize\n    }\n  },\n\n  setup(props, {\n    slots\n  }) {\n    const $ELEMENT = useGlobalConfig();\n    const elForm = inject(elFormKey, {});\n    const validateState = ref(\"\");\n    const validateMessage = ref(\"\");\n    const isValidationEnabled = ref(false);\n    const computedLabelWidth = ref(\"\");\n    const formItemRef = ref();\n    const vm = getCurrentInstance();\n    const isNested = computed(() => {\n      let parent = vm.parent;\n\n      while (parent && parent.type.name !== \"ElForm\") {\n        if (parent.type.name === \"ElFormItem\") {\n          return true;\n        }\n\n        parent = parent.parent;\n      }\n\n      return false;\n    });\n    let initialValue = void 0;\n    watch(() => props.error, val => {\n      validateMessage.value = val;\n      validateState.value = val ? \"error\" : \"\";\n    }, {\n      immediate: true\n    });\n    watch(() => props.validateStatus, val => {\n      validateState.value = val;\n    });\n    const labelFor = computed(() => props.for || props.prop);\n    const labelStyle = computed(() => {\n      const ret = {};\n      if (elForm.labelPosition === \"top\") return ret;\n      const labelWidth = addUnit(props.labelWidth || elForm.labelWidth);\n\n      if (labelWidth) {\n        ret.width = labelWidth;\n      }\n\n      return ret;\n    });\n    const contentStyle = computed(() => {\n      const ret = {};\n\n      if (elForm.labelPosition === \"top\" || elForm.inline) {\n        return ret;\n      }\n\n      if (!props.label && !props.labelWidth && isNested.value) {\n        return ret;\n      }\n\n      const labelWidth = addUnit(props.labelWidth || elForm.labelWidth);\n\n      if (!props.label && !slots.label) {\n        ret.marginLeft = labelWidth;\n      }\n\n      return ret;\n    });\n    const fieldValue = computed(() => {\n      const model = elForm.model;\n\n      if (!model || !props.prop) {\n        return;\n      }\n\n      let path = props.prop;\n\n      if (path.indexOf(\":\") !== -1) {\n        path = path.replace(/:/, \".\");\n      }\n\n      return getPropByPath(model, path, true).v;\n    });\n    const isRequired = computed(() => {\n      const rules = getRules();\n      let required = false;\n\n      if (rules && rules.length) {\n        rules.every(rule => {\n          if (rule.required) {\n            required = true;\n            return false;\n          }\n\n          return true;\n        });\n      }\n\n      return required;\n    });\n    const elFormItemSize = computed(() => props.size || elForm.size);\n    const sizeClass = computed(() => {\n      return elFormItemSize.value || $ELEMENT.size;\n    });\n\n    const validate = (trigger, callback = NOOP) => {\n      if (!isValidationEnabled.value) {\n        callback();\n        return;\n      }\n\n      const rules = getFilteredRule(trigger);\n\n      if ((!rules || rules.length === 0) && props.required === void 0) {\n        callback();\n        return;\n      }\n\n      validateState.value = \"validating\";\n      const descriptor = {};\n\n      if (rules && rules.length > 0) {\n        rules.forEach(rule => {\n          delete rule.trigger;\n        });\n      }\n\n      descriptor[props.prop] = rules;\n      const validator = new AsyncValidator(descriptor);\n      const model = {};\n      model[props.prop] = fieldValue.value;\n      validator.validate(model, {\n        firstFields: true\n      }, (errors, invalidFields) => {\n        var _a;\n\n        validateState.value = !errors ? \"success\" : \"error\";\n        validateMessage.value = errors ? errors[0].message || `${props.prop} is required` : \"\";\n        callback(validateMessage.value, invalidFields);\n        (_a = elForm.emit) == null ? void 0 : _a.call(elForm, \"validate\", props.prop, !errors, validateMessage.value || null);\n      });\n    };\n\n    const clearValidate = () => {\n      validateState.value = \"\";\n      validateMessage.value = \"\";\n    };\n\n    const resetField = () => {\n      validateState.value = \"\";\n      validateMessage.value = \"\";\n      const model = elForm.model;\n      const value = fieldValue.value;\n      let path = props.prop;\n\n      if (path.indexOf(\":\") !== -1) {\n        path = path.replace(/:/, \".\");\n      }\n\n      const prop = getPropByPath(model, path, true);\n\n      if (Array.isArray(value)) {\n        prop.o[prop.k] = [].concat(initialValue);\n      } else {\n        prop.o[prop.k] = initialValue;\n      }\n    };\n\n    const getRules = () => {\n      const formRules = elForm.rules;\n      const selfRules = props.rules;\n      const requiredRule = props.required !== void 0 ? {\n        required: !!props.required\n      } : [];\n      const prop = getPropByPath(formRules, props.prop || \"\", false);\n      const normalizedRule = formRules ? prop.o[props.prop || \"\"] || prop.v : [];\n      return [].concat(selfRules || normalizedRule || []).concat(requiredRule);\n    };\n\n    const getFilteredRule = trigger => {\n      const rules = getRules();\n      return rules.filter(rule => {\n        if (!rule.trigger || trigger === \"\") return true;\n\n        if (Array.isArray(rule.trigger)) {\n          return rule.trigger.indexOf(trigger) > -1;\n        } else {\n          return rule.trigger === trigger;\n        }\n      }).map(rule => __spreadValues({}, rule));\n    };\n\n    const evaluateValidationEnabled = () => {\n      var _a;\n\n      isValidationEnabled.value = !!((_a = getRules()) == null ? void 0 : _a.length);\n    };\n\n    const updateComputedLabelWidth = width => {\n      computedLabelWidth.value = width ? `${width}px` : \"\";\n    };\n\n    const elFormItem = reactive(__spreadProps(__spreadValues({}, toRefs(props)), {\n      size: sizeClass,\n      validateState,\n      $el: formItemRef,\n      evaluateValidationEnabled,\n      resetField,\n      clearValidate,\n      validate,\n      updateComputedLabelWidth\n    }));\n    onMounted(() => {\n      if (props.prop) {\n        elForm == null ? void 0 : elForm.addField(elFormItem);\n        const value = fieldValue.value;\n        initialValue = Array.isArray(value) ? [...value] : value;\n        evaluateValidationEnabled();\n      }\n    });\n    onBeforeUnmount(() => {\n      elForm == null ? void 0 : elForm.removeField(elFormItem);\n    });\n    provide(elFormItemKey, elFormItem);\n    const formItemClass = computed(() => [{\n      \"el-form-item--feedback\": elForm.statusIcon,\n      \"is-error\": validateState.value === \"error\",\n      \"is-validating\": validateState.value === \"validating\",\n      \"is-success\": validateState.value === \"success\",\n      \"is-required\": isRequired.value || props.required,\n      \"is-no-asterisk\": elForm.hideRequiredAsterisk\n    }, sizeClass.value ? `el-form-item--${sizeClass.value}` : \"\"]);\n    const shouldShowError = computed(() => {\n      return validateState.value === \"error\" && props.showMessage && elForm.showMessage;\n    });\n    return {\n      formItemRef,\n      formItemClass,\n      shouldShowError,\n      elForm,\n      labelStyle,\n      contentStyle,\n      validateMessage,\n      labelFor,\n      resetField,\n      clearValidate\n    };\n  }\n\n});\nconst _hoisted_1 = [\"for\"];\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LabelWrap = resolveComponent(\"LabelWrap\");\n\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"formItemRef\",\n    class: normalizeClass([\"el-form-item\", _ctx.formItemClass])\n  }, [createVNode(_component_LabelWrap, {\n    \"is-auto-width\": _ctx.labelStyle.width === \"auto\",\n    \"update-all\": _ctx.elForm.labelWidth === \"auto\"\n  }, {\n    default: withCtx(() => [_ctx.label || _ctx.$slots.label ? (openBlock(), createElementBlock(\"label\", {\n      key: 0,\n      for: _ctx.labelFor,\n      class: \"el-form-item__label\",\n      style: normalizeStyle(_ctx.labelStyle)\n    }, [renderSlot(_ctx.$slots, \"label\", {\n      label: _ctx.label + _ctx.elForm.labelSuffix\n    }, () => [createTextVNode(toDisplayString(_ctx.label + _ctx.elForm.labelSuffix), 1)])], 12, _hoisted_1)) : createCommentVNode(\"v-if\", true)]),\n    _: 3\n  }, 8, [\"is-auto-width\", \"update-all\"]), createElementVNode(\"div\", {\n    class: \"el-form-item__content\",\n    style: normalizeStyle(_ctx.contentStyle)\n  }, [renderSlot(_ctx.$slots, \"default\"), createVNode(Transition, {\n    name: \"el-zoom-in-top\"\n  }, {\n    default: withCtx(() => [_ctx.shouldShowError ? renderSlot(_ctx.$slots, \"error\", {\n      key: 0,\n      error: _ctx.validateMessage\n    }, () => [createElementVNode(\"div\", {\n      class: normalizeClass([\"el-form-item__error\", {\n        \"el-form-item__error--inline\": typeof _ctx.inlineMessage === \"boolean\" ? _ctx.inlineMessage : _ctx.elForm.inlineMessage || false\n      }])\n    }, toDisplayString(_ctx.validateMessage), 3)]) : createCommentVNode(\"v-if\", true)]),\n    _: 3\n  })], 4)], 2);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/form/src/form-item.vue\";\nconst ElForm = withInstall(script$1, {\n  FormItem: script\n});\nconst ElFormItem = withNoopInstall(script);\nexport { ElForm, ElFormItem, ElForm as default };","map":{"version":3,"names":["withInstall","withNoopInstall","defineComponent","watch","reactive","toRefs","provide","ref","computed","openBlock","createElementBlock","normalizeClass","renderSlot","inject","onMounted","onUpdated","onBeforeUnmount","nextTick","h","Fragment","getCurrentInstance","resolveComponent","createVNode","withCtx","normalizeStyle","createTextVNode","toDisplayString","createCommentVNode","createElementVNode","Transition","elFormKey","elFormItemKey","debugWarn","NOOP","AsyncValidator","useGlobalConfig","addUnit","getPropByPath","isValidComponentSize","addResizeListener","removeResizeListener","__defProp$1","Object","defineProperty","__defProps$1","defineProperties","__getOwnPropDescs$1","getOwnPropertyDescriptors","__getOwnPropSymbols$1","getOwnPropertySymbols","__hasOwnProp$1","prototype","hasOwnProperty","__propIsEnum$1","propertyIsEnumerable","__defNormalProp$1","obj","key","value","enumerable","configurable","writable","__spreadValues$1","a","b","prop","call","__spreadProps$1","useFormLabelWidth","potentialLabelWidthArr","autoLabelWidth","length","max","Math","getLabelWidthIndex","width","index","indexOf","registerLabelWidth","val","oldVal","splice","push","deregisterLabelWidth","script$1","name","props","model","rules","labelPosition","String","labelWidth","type","Number","default","labelSuffix","inline","Boolean","inlineMessage","statusIcon","showMessage","size","disabled","validateOnRuleChange","hideRequiredAsterisk","scrollToError","emits","setup","emit","fields","forEach","field","evaluateValidationEnabled","validate","addField","removeField","resetFields","resetField","clearValidate","props2","fds","filter","callback","promise","Promise","resolve","reject","valid2","invalidFields2","valid","count","invalidFields","firstInvalidFields","message","field2","scrollToField","keys","validateField","cb","concat","item","$el","scrollIntoView","elForm","render$1","_ctx","_cache","$props","$setup","$data","$options","class","$slots","render","__file","LabelWrap","isAutoWidth","updateAll","slots","el","elFormItem","computedWidth","updateComputedLabelWidth","getLabelWidth","_a","firstElementChild","window","getComputedStyle","ceil","parseFloat","updateLabelWidth","action","updateLabelWidthFn","_b","style","marginWidth","parseInt","marginPosition","__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","__spreadProps","script","componentName","components","label","required","Array","error","validateStatus","for","validator","$ELEMENT","validateState","validateMessage","isValidationEnabled","computedLabelWidth","formItemRef","vm","isNested","parent","initialValue","immediate","labelFor","labelStyle","ret","contentStyle","marginLeft","fieldValue","path","replace","v","isRequired","getRules","every","rule","elFormItemSize","sizeClass","trigger","getFilteredRule","descriptor","firstFields","errors","isArray","o","k","formRules","selfRules","requiredRule","normalizedRule","map","formItemClass","shouldShowError","_hoisted_1","_component_LabelWrap","_","ElForm","FormItem","ElFormItem"],"sources":["/home/haibara/ghq/github.com/w-haibara/kakemoti-ui/node_modules/element-plus/es/components/form/index.js"],"sourcesContent":["import { withInstall, withNoopInstall } from 'element-plus/es/utils/with-install';\nimport { defineComponent, watch, reactive, toRefs, provide, ref, computed, openBlock, createElementBlock, normalizeClass, renderSlot, inject, onMounted, onUpdated, onBeforeUnmount, nextTick, h, Fragment, getCurrentInstance, resolveComponent, createVNode, withCtx, normalizeStyle, createTextVNode, toDisplayString, createCommentVNode, createElementVNode, Transition } from 'vue';\nimport { elFormKey, elFormItemKey } from 'element-plus/es/tokens';\nimport { debugWarn } from 'element-plus/es/utils/error';\nimport { NOOP } from '@vue/shared';\nimport AsyncValidator from 'async-validator';\nimport { useGlobalConfig, addUnit, getPropByPath } from 'element-plus/es/utils/util';\nimport { isValidComponentSize } from 'element-plus/es/utils/validators';\nimport { addResizeListener, removeResizeListener } from 'element-plus/es/utils/resize-event';\n\nvar __defProp$1 = Object.defineProperty;\nvar __defProps$1 = Object.defineProperties;\nvar __getOwnPropDescs$1 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$1 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$1.call(b, prop))\n      __defNormalProp$1(a, prop, b[prop]);\n  if (__getOwnPropSymbols$1)\n    for (var prop of __getOwnPropSymbols$1(b)) {\n      if (__propIsEnum$1.call(b, prop))\n        __defNormalProp$1(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$1 = (a, b) => __defProps$1(a, __getOwnPropDescs$1(b));\nfunction useFormLabelWidth() {\n  const potentialLabelWidthArr = ref([]);\n  const autoLabelWidth = computed(() => {\n    if (!potentialLabelWidthArr.value.length)\n      return \"0\";\n    const max = Math.max(...potentialLabelWidthArr.value);\n    return max ? `${max}px` : \"\";\n  });\n  function getLabelWidthIndex(width) {\n    const index = potentialLabelWidthArr.value.indexOf(width);\n    if (index === -1) {\n      debugWarn(\"Form\", `unexpected width ${width}`);\n    }\n    return index;\n  }\n  function registerLabelWidth(val, oldVal) {\n    if (val && oldVal) {\n      const index = getLabelWidthIndex(oldVal);\n      potentialLabelWidthArr.value.splice(index, 1, val);\n    } else if (val) {\n      potentialLabelWidthArr.value.push(val);\n    }\n  }\n  function deregisterLabelWidth(val) {\n    const index = getLabelWidthIndex(val);\n    index > -1 && potentialLabelWidthArr.value.splice(index, 1);\n  }\n  return {\n    autoLabelWidth,\n    registerLabelWidth,\n    deregisterLabelWidth\n  };\n}\nvar script$1 = defineComponent({\n  name: \"ElForm\",\n  props: {\n    model: Object,\n    rules: Object,\n    labelPosition: String,\n    labelWidth: {\n      type: [String, Number],\n      default: \"\"\n    },\n    labelSuffix: {\n      type: String,\n      default: \"\"\n    },\n    inline: Boolean,\n    inlineMessage: Boolean,\n    statusIcon: Boolean,\n    showMessage: {\n      type: Boolean,\n      default: true\n    },\n    size: String,\n    disabled: Boolean,\n    validateOnRuleChange: {\n      type: Boolean,\n      default: true\n    },\n    hideRequiredAsterisk: {\n      type: Boolean,\n      default: false\n    },\n    scrollToError: Boolean\n  },\n  emits: [\"validate\"],\n  setup(props, { emit }) {\n    const fields = [];\n    watch(() => props.rules, () => {\n      fields.forEach((field) => {\n        field.evaluateValidationEnabled();\n      });\n      if (props.validateOnRuleChange) {\n        validate(() => ({}));\n      }\n    });\n    const addField = (field) => {\n      if (field) {\n        fields.push(field);\n      }\n    };\n    const removeField = (field) => {\n      if (field.prop) {\n        fields.splice(fields.indexOf(field), 1);\n      }\n    };\n    const resetFields = () => {\n      if (!props.model) {\n        debugWarn(\"Form\", \"model is required for resetFields to work.\");\n        return;\n      }\n      fields.forEach((field) => {\n        field.resetField();\n      });\n    };\n    const clearValidate = (props2 = []) => {\n      const fds = props2.length ? typeof props2 === \"string\" ? fields.filter((field) => props2 === field.prop) : fields.filter((field) => props2.indexOf(field.prop) > -1) : fields;\n      fds.forEach((field) => {\n        field.clearValidate();\n      });\n    };\n    const validate = (callback) => {\n      if (!props.model) {\n        debugWarn(\"Form\", \"model is required for validate to work!\");\n        return;\n      }\n      let promise;\n      if (typeof callback !== \"function\") {\n        promise = new Promise((resolve, reject) => {\n          callback = function(valid2, invalidFields2) {\n            if (valid2) {\n              resolve(true);\n            } else {\n              reject(invalidFields2);\n            }\n          };\n        });\n      }\n      if (fields.length === 0) {\n        callback(true);\n      }\n      let valid = true;\n      let count = 0;\n      let invalidFields = {};\n      let firstInvalidFields;\n      for (const field of fields) {\n        field.validate(\"\", (message, field2) => {\n          if (message) {\n            valid = false;\n            firstInvalidFields || (firstInvalidFields = field2);\n          }\n          invalidFields = __spreadValues$1(__spreadValues$1({}, invalidFields), field2);\n          if (++count === fields.length) {\n            callback(valid, invalidFields);\n          }\n        });\n      }\n      if (!valid && props.scrollToError) {\n        scrollToField(Object.keys(firstInvalidFields)[0]);\n      }\n      return promise;\n    };\n    const validateField = (props2, cb) => {\n      props2 = [].concat(props2);\n      const fds = fields.filter((field) => props2.indexOf(field.prop) !== -1);\n      if (!fields.length) {\n        debugWarn(\"Form\", \"please pass correct props!\");\n        return;\n      }\n      fds.forEach((field) => {\n        field.validate(\"\", cb);\n      });\n    };\n    const scrollToField = (prop) => {\n      fields.forEach((item) => {\n        if (item.prop === prop) {\n          item.$el.scrollIntoView();\n        }\n      });\n    };\n    const elForm = reactive(__spreadValues$1(__spreadProps$1(__spreadValues$1({}, toRefs(props)), {\n      resetFields,\n      clearValidate,\n      validateField,\n      emit,\n      addField,\n      removeField\n    }), useFormLabelWidth()));\n    provide(elFormKey, elForm);\n    return {\n      validate,\n      resetFields,\n      clearValidate,\n      validateField,\n      scrollToField\n    };\n  }\n});\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"form\", {\n    class: normalizeClass([\"el-form\", [\n      _ctx.labelPosition ? \"el-form--label-\" + _ctx.labelPosition : \"\",\n      { \"el-form--inline\": _ctx.inline }\n    ]])\n  }, [\n    renderSlot(_ctx.$slots, \"default\")\n  ], 2);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/components/form/src/form.vue\";\n\nvar LabelWrap = defineComponent({\n  name: \"ElLabelWrap\",\n  props: {\n    isAutoWidth: Boolean,\n    updateAll: Boolean\n  },\n  setup(props, { slots }) {\n    const el = ref(null);\n    const elForm = inject(elFormKey);\n    const elFormItem = inject(elFormItemKey);\n    const computedWidth = ref(0);\n    watch(computedWidth, (val, oldVal) => {\n      if (props.updateAll) {\n        elForm.registerLabelWidth(val, oldVal);\n        elFormItem.updateComputedLabelWidth(val);\n      }\n    });\n    const getLabelWidth = () => {\n      var _a;\n      if ((_a = el.value) == null ? void 0 : _a.firstElementChild) {\n        const width = window.getComputedStyle(el.value.firstElementChild).width;\n        return Math.ceil(parseFloat(width));\n      } else {\n        return 0;\n      }\n    };\n    const updateLabelWidth = (action = \"update\") => {\n      nextTick(() => {\n        if (slots.default && props.isAutoWidth) {\n          if (action === \"update\") {\n            computedWidth.value = getLabelWidth();\n          } else if (action === \"remove\") {\n            elForm.deregisterLabelWidth(computedWidth.value);\n          }\n        }\n      });\n    };\n    const updateLabelWidthFn = () => updateLabelWidth(\"update\");\n    onMounted(() => {\n      addResizeListener(el.value.firstElementChild, updateLabelWidthFn);\n      updateLabelWidthFn();\n    });\n    onUpdated(updateLabelWidthFn);\n    onBeforeUnmount(() => {\n      var _a;\n      updateLabelWidth(\"remove\");\n      removeResizeListener((_a = el.value) == null ? void 0 : _a.firstElementChild, updateLabelWidthFn);\n    });\n    function render() {\n      var _a, _b;\n      if (!slots)\n        return null;\n      if (props.isAutoWidth) {\n        const autoLabelWidth = elForm.autoLabelWidth;\n        const style = {};\n        if (autoLabelWidth && autoLabelWidth !== \"auto\") {\n          const marginWidth = Math.max(0, parseInt(autoLabelWidth, 10) - computedWidth.value);\n          const marginPosition = elForm.labelPosition === \"left\" ? \"marginRight\" : \"marginLeft\";\n          if (marginWidth) {\n            style[marginPosition] = `${marginWidth}px`;\n          }\n        }\n        return h(\"div\", {\n          ref: el,\n          class: [\"el-form-item__label-wrap\"],\n          style\n        }, (_a = slots.default) == null ? void 0 : _a.call(slots));\n      } else {\n        return h(Fragment, { ref: el }, (_b = slots.default) == null ? void 0 : _b.call(slots));\n      }\n    }\n    return render;\n  }\n});\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar script = defineComponent({\n  name: \"ElFormItem\",\n  componentName: \"ElFormItem\",\n  components: {\n    LabelWrap\n  },\n  props: {\n    label: String,\n    labelWidth: {\n      type: [String, Number],\n      default: \"\"\n    },\n    prop: String,\n    required: {\n      type: Boolean,\n      default: void 0\n    },\n    rules: [Object, Array],\n    error: String,\n    validateStatus: String,\n    for: String,\n    inlineMessage: {\n      type: [String, Boolean],\n      default: \"\"\n    },\n    showMessage: {\n      type: Boolean,\n      default: true\n    },\n    size: {\n      type: String,\n      validator: isValidComponentSize\n    }\n  },\n  setup(props, { slots }) {\n    const $ELEMENT = useGlobalConfig();\n    const elForm = inject(elFormKey, {});\n    const validateState = ref(\"\");\n    const validateMessage = ref(\"\");\n    const isValidationEnabled = ref(false);\n    const computedLabelWidth = ref(\"\");\n    const formItemRef = ref();\n    const vm = getCurrentInstance();\n    const isNested = computed(() => {\n      let parent = vm.parent;\n      while (parent && parent.type.name !== \"ElForm\") {\n        if (parent.type.name === \"ElFormItem\") {\n          return true;\n        }\n        parent = parent.parent;\n      }\n      return false;\n    });\n    let initialValue = void 0;\n    watch(() => props.error, (val) => {\n      validateMessage.value = val;\n      validateState.value = val ? \"error\" : \"\";\n    }, {\n      immediate: true\n    });\n    watch(() => props.validateStatus, (val) => {\n      validateState.value = val;\n    });\n    const labelFor = computed(() => props.for || props.prop);\n    const labelStyle = computed(() => {\n      const ret = {};\n      if (elForm.labelPosition === \"top\")\n        return ret;\n      const labelWidth = addUnit(props.labelWidth || elForm.labelWidth);\n      if (labelWidth) {\n        ret.width = labelWidth;\n      }\n      return ret;\n    });\n    const contentStyle = computed(() => {\n      const ret = {};\n      if (elForm.labelPosition === \"top\" || elForm.inline) {\n        return ret;\n      }\n      if (!props.label && !props.labelWidth && isNested.value) {\n        return ret;\n      }\n      const labelWidth = addUnit(props.labelWidth || elForm.labelWidth);\n      if (!props.label && !slots.label) {\n        ret.marginLeft = labelWidth;\n      }\n      return ret;\n    });\n    const fieldValue = computed(() => {\n      const model = elForm.model;\n      if (!model || !props.prop) {\n        return;\n      }\n      let path = props.prop;\n      if (path.indexOf(\":\") !== -1) {\n        path = path.replace(/:/, \".\");\n      }\n      return getPropByPath(model, path, true).v;\n    });\n    const isRequired = computed(() => {\n      const rules = getRules();\n      let required = false;\n      if (rules && rules.length) {\n        rules.every((rule) => {\n          if (rule.required) {\n            required = true;\n            return false;\n          }\n          return true;\n        });\n      }\n      return required;\n    });\n    const elFormItemSize = computed(() => props.size || elForm.size);\n    const sizeClass = computed(() => {\n      return elFormItemSize.value || $ELEMENT.size;\n    });\n    const validate = (trigger, callback = NOOP) => {\n      if (!isValidationEnabled.value) {\n        callback();\n        return;\n      }\n      const rules = getFilteredRule(trigger);\n      if ((!rules || rules.length === 0) && props.required === void 0) {\n        callback();\n        return;\n      }\n      validateState.value = \"validating\";\n      const descriptor = {};\n      if (rules && rules.length > 0) {\n        rules.forEach((rule) => {\n          delete rule.trigger;\n        });\n      }\n      descriptor[props.prop] = rules;\n      const validator = new AsyncValidator(descriptor);\n      const model = {};\n      model[props.prop] = fieldValue.value;\n      validator.validate(model, { firstFields: true }, (errors, invalidFields) => {\n        var _a;\n        validateState.value = !errors ? \"success\" : \"error\";\n        validateMessage.value = errors ? errors[0].message || `${props.prop} is required` : \"\";\n        callback(validateMessage.value, invalidFields);\n        (_a = elForm.emit) == null ? void 0 : _a.call(elForm, \"validate\", props.prop, !errors, validateMessage.value || null);\n      });\n    };\n    const clearValidate = () => {\n      validateState.value = \"\";\n      validateMessage.value = \"\";\n    };\n    const resetField = () => {\n      validateState.value = \"\";\n      validateMessage.value = \"\";\n      const model = elForm.model;\n      const value = fieldValue.value;\n      let path = props.prop;\n      if (path.indexOf(\":\") !== -1) {\n        path = path.replace(/:/, \".\");\n      }\n      const prop = getPropByPath(model, path, true);\n      if (Array.isArray(value)) {\n        prop.o[prop.k] = [].concat(initialValue);\n      } else {\n        prop.o[prop.k] = initialValue;\n      }\n    };\n    const getRules = () => {\n      const formRules = elForm.rules;\n      const selfRules = props.rules;\n      const requiredRule = props.required !== void 0 ? { required: !!props.required } : [];\n      const prop = getPropByPath(formRules, props.prop || \"\", false);\n      const normalizedRule = formRules ? prop.o[props.prop || \"\"] || prop.v : [];\n      return [].concat(selfRules || normalizedRule || []).concat(requiredRule);\n    };\n    const getFilteredRule = (trigger) => {\n      const rules = getRules();\n      return rules.filter((rule) => {\n        if (!rule.trigger || trigger === \"\")\n          return true;\n        if (Array.isArray(rule.trigger)) {\n          return rule.trigger.indexOf(trigger) > -1;\n        } else {\n          return rule.trigger === trigger;\n        }\n      }).map((rule) => __spreadValues({}, rule));\n    };\n    const evaluateValidationEnabled = () => {\n      var _a;\n      isValidationEnabled.value = !!((_a = getRules()) == null ? void 0 : _a.length);\n    };\n    const updateComputedLabelWidth = (width) => {\n      computedLabelWidth.value = width ? `${width}px` : \"\";\n    };\n    const elFormItem = reactive(__spreadProps(__spreadValues({}, toRefs(props)), {\n      size: sizeClass,\n      validateState,\n      $el: formItemRef,\n      evaluateValidationEnabled,\n      resetField,\n      clearValidate,\n      validate,\n      updateComputedLabelWidth\n    }));\n    onMounted(() => {\n      if (props.prop) {\n        elForm == null ? void 0 : elForm.addField(elFormItem);\n        const value = fieldValue.value;\n        initialValue = Array.isArray(value) ? [...value] : value;\n        evaluateValidationEnabled();\n      }\n    });\n    onBeforeUnmount(() => {\n      elForm == null ? void 0 : elForm.removeField(elFormItem);\n    });\n    provide(elFormItemKey, elFormItem);\n    const formItemClass = computed(() => [\n      {\n        \"el-form-item--feedback\": elForm.statusIcon,\n        \"is-error\": validateState.value === \"error\",\n        \"is-validating\": validateState.value === \"validating\",\n        \"is-success\": validateState.value === \"success\",\n        \"is-required\": isRequired.value || props.required,\n        \"is-no-asterisk\": elForm.hideRequiredAsterisk\n      },\n      sizeClass.value ? `el-form-item--${sizeClass.value}` : \"\"\n    ]);\n    const shouldShowError = computed(() => {\n      return validateState.value === \"error\" && props.showMessage && elForm.showMessage;\n    });\n    return {\n      formItemRef,\n      formItemClass,\n      shouldShowError,\n      elForm,\n      labelStyle,\n      contentStyle,\n      validateMessage,\n      labelFor,\n      resetField,\n      clearValidate\n    };\n  }\n});\n\nconst _hoisted_1 = [\"for\"];\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LabelWrap = resolveComponent(\"LabelWrap\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"formItemRef\",\n    class: normalizeClass([\"el-form-item\", _ctx.formItemClass])\n  }, [\n    createVNode(_component_LabelWrap, {\n      \"is-auto-width\": _ctx.labelStyle.width === \"auto\",\n      \"update-all\": _ctx.elForm.labelWidth === \"auto\"\n    }, {\n      default: withCtx(() => [\n        _ctx.label || _ctx.$slots.label ? (openBlock(), createElementBlock(\"label\", {\n          key: 0,\n          for: _ctx.labelFor,\n          class: \"el-form-item__label\",\n          style: normalizeStyle(_ctx.labelStyle)\n        }, [\n          renderSlot(_ctx.$slots, \"label\", {\n            label: _ctx.label + _ctx.elForm.labelSuffix\n          }, () => [\n            createTextVNode(toDisplayString(_ctx.label + _ctx.elForm.labelSuffix), 1)\n          ])\n        ], 12, _hoisted_1)) : createCommentVNode(\"v-if\", true)\n      ]),\n      _: 3\n    }, 8, [\"is-auto-width\", \"update-all\"]),\n    createElementVNode(\"div\", {\n      class: \"el-form-item__content\",\n      style: normalizeStyle(_ctx.contentStyle)\n    }, [\n      renderSlot(_ctx.$slots, \"default\"),\n      createVNode(Transition, { name: \"el-zoom-in-top\" }, {\n        default: withCtx(() => [\n          _ctx.shouldShowError ? renderSlot(_ctx.$slots, \"error\", {\n            key: 0,\n            error: _ctx.validateMessage\n          }, () => [\n            createElementVNode(\"div\", {\n              class: normalizeClass([\"el-form-item__error\", {\n                \"el-form-item__error--inline\": typeof _ctx.inlineMessage === \"boolean\" ? _ctx.inlineMessage : _ctx.elForm.inlineMessage || false\n              }])\n            }, toDisplayString(_ctx.validateMessage), 3)\n          ]) : createCommentVNode(\"v-if\", true)\n        ]),\n        _: 3\n      })\n    ], 4)\n  ], 2);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/form/src/form-item.vue\";\n\nconst ElForm = withInstall(script$1, {\n  FormItem: script\n});\nconst ElFormItem = withNoopInstall(script);\n\nexport { ElForm, ElFormItem, ElForm as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}