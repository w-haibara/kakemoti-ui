{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { reactive, defineComponent, inject, h, provide, ref, getCurrentInstance, watch, nextTick, resolveComponent, withDirectives, openBlock, createElementBlock, normalizeClass, withModifiers, createElementVNode, normalizeStyle, createBlock, createCommentVNode, createVNode, withCtx, Fragment, renderList, vShow, shallowRef, onMounted, onBeforeUnmount, onUpdated, computed, toDisplayString } from 'vue';\nimport { useLocaleInject } from 'element-plus/es/hooks';\nimport { hasOwn } from '@vue/shared';\nimport ElCollapseTransition from 'element-plus/es/components/collapse-transition';\nimport ElCheckbox from 'element-plus/es/components/checkbox';\nimport { debugWarn } from 'element-plus/es/utils/error';\nimport { removeClass, addClass, on, off } from 'element-plus/es/utils/dom';\nimport { EVENT_CODE } from 'element-plus/es/utils/aria';\nconst NODE_KEY = \"$treeNodeId\";\n\nconst markNodeData = function (node, data) {\n  if (!data || data[NODE_KEY]) return;\n  Object.defineProperty(data, NODE_KEY, {\n    value: node.id,\n    enumerable: false,\n    configurable: false,\n    writable: false\n  });\n};\n\nconst getNodeKey = function (key, data) {\n  if (!key) return data[NODE_KEY];\n  return data[key];\n};\n\nconst getChildState = node => {\n  let all = true;\n  let none = true;\n  let allWithoutDisable = true;\n\n  for (let i = 0, j = node.length; i < j; i++) {\n    const n = node[i];\n\n    if (n.checked !== true || n.indeterminate) {\n      all = false;\n\n      if (!n.disabled) {\n        allWithoutDisable = false;\n      }\n    }\n\n    if (n.checked !== false || n.indeterminate) {\n      none = false;\n    }\n  }\n\n  return {\n    all,\n    none,\n    allWithoutDisable,\n    half: !all && !none\n  };\n};\n\nconst reInitChecked = function (node) {\n  if (node.childNodes.length === 0) return;\n  const {\n    all,\n    none,\n    half\n  } = getChildState(node.childNodes);\n\n  if (all) {\n    node.checked = true;\n    node.indeterminate = false;\n  } else if (half) {\n    node.checked = false;\n    node.indeterminate = true;\n  } else if (none) {\n    node.checked = false;\n    node.indeterminate = false;\n  }\n\n  const parent = node.parent;\n  if (!parent || parent.level === 0) return;\n\n  if (!node.store.checkStrictly) {\n    reInitChecked(parent);\n  }\n};\n\nconst getPropertyFromData = function (node, prop) {\n  const props = node.store.props;\n  const data = node.data || {};\n  const config = props[prop];\n\n  if (typeof config === \"function\") {\n    return config(data, node);\n  } else if (typeof config === \"string\") {\n    return data[config];\n  } else if (typeof config === \"undefined\") {\n    const dataProp = data[prop];\n    return dataProp === void 0 ? \"\" : dataProp;\n  }\n};\n\nlet nodeIdSeed = 0;\n\nclass Node {\n  constructor(options) {\n    this.id = nodeIdSeed++;\n    this.text = null;\n    this.checked = false;\n    this.indeterminate = false;\n    this.data = null;\n    this.expanded = false;\n    this.parent = null;\n    this.visible = true;\n    this.isCurrent = false;\n    this.canFocus = false;\n\n    for (const name in options) {\n      if (hasOwn(options, name)) {\n        this[name] = options[name];\n      }\n    }\n\n    this.level = 0;\n    this.loaded = false;\n    this.childNodes = [];\n    this.loading = false;\n\n    if (this.parent) {\n      this.level = this.parent.level + 1;\n    }\n  }\n\n  initialize() {\n    const store = this.store;\n\n    if (!store) {\n      throw new Error(\"[Node]store is required!\");\n    }\n\n    store.registerNode(this);\n    const props = store.props;\n\n    if (props && typeof props.isLeaf !== \"undefined\") {\n      const isLeaf = getPropertyFromData(this, \"isLeaf\");\n\n      if (typeof isLeaf === \"boolean\") {\n        this.isLeafByUser = isLeaf;\n      }\n    }\n\n    if (store.lazy !== true && this.data) {\n      this.setData(this.data);\n\n      if (store.defaultExpandAll) {\n        this.expanded = true;\n        this.canFocus = true;\n      }\n    } else if (this.level > 0 && store.lazy && store.defaultExpandAll) {\n      this.expand();\n    }\n\n    if (!Array.isArray(this.data)) {\n      markNodeData(this, this.data);\n    }\n\n    if (!this.data) return;\n    const defaultExpandedKeys = store.defaultExpandedKeys;\n    const key = store.key;\n\n    if (key && defaultExpandedKeys && defaultExpandedKeys.indexOf(this.key) !== -1) {\n      this.expand(null, store.autoExpandParent);\n    }\n\n    if (key && store.currentNodeKey !== void 0 && this.key === store.currentNodeKey) {\n      store.currentNode = this;\n      store.currentNode.isCurrent = true;\n    }\n\n    if (store.lazy) {\n      store._initDefaultCheckedNode(this);\n    }\n\n    this.updateLeafState();\n    if (this.parent && (this.level === 1 || this.parent.expanded === true)) this.canFocus = true;\n  }\n\n  setData(data) {\n    if (!Array.isArray(data)) {\n      markNodeData(this, data);\n    }\n\n    this.data = data;\n    this.childNodes = [];\n    let children;\n\n    if (this.level === 0 && this.data instanceof Array) {\n      children = this.data;\n    } else {\n      children = getPropertyFromData(this, \"children\") || [];\n    }\n\n    for (let i = 0, j = children.length; i < j; i++) {\n      this.insertChild({\n        data: children[i]\n      });\n    }\n  }\n\n  get label() {\n    return getPropertyFromData(this, \"label\");\n  }\n\n  get key() {\n    const nodeKey = this.store.key;\n    if (this.data) return this.data[nodeKey];\n    return null;\n  }\n\n  get disabled() {\n    return getPropertyFromData(this, \"disabled\");\n  }\n\n  get nextSibling() {\n    const parent = this.parent;\n\n    if (parent) {\n      const index = parent.childNodes.indexOf(this);\n\n      if (index > -1) {\n        return parent.childNodes[index + 1];\n      }\n    }\n\n    return null;\n  }\n\n  get previousSibling() {\n    const parent = this.parent;\n\n    if (parent) {\n      const index = parent.childNodes.indexOf(this);\n\n      if (index > -1) {\n        return index > 0 ? parent.childNodes[index - 1] : null;\n      }\n    }\n\n    return null;\n  }\n\n  contains(target, deep = true) {\n    return (this.childNodes || []).some(child => child === target || deep && child.contains(target));\n  }\n\n  remove() {\n    const parent = this.parent;\n\n    if (parent) {\n      parent.removeChild(this);\n    }\n  }\n\n  insertChild(child, index, batch) {\n    if (!child) throw new Error(\"InsertChild error: child is required.\");\n\n    if (!(child instanceof Node)) {\n      if (!batch) {\n        const children = this.getChildren(true);\n\n        if (children.indexOf(child.data) === -1) {\n          if (typeof index === \"undefined\" || index < 0) {\n            children.push(child.data);\n          } else {\n            children.splice(index, 0, child.data);\n          }\n        }\n      }\n\n      Object.assign(child, {\n        parent: this,\n        store: this.store\n      });\n      child = reactive(new Node(child));\n\n      if (child instanceof Node) {\n        child.initialize();\n      }\n    }\n\n    child.level = this.level + 1;\n\n    if (typeof index === \"undefined\" || index < 0) {\n      this.childNodes.push(child);\n    } else {\n      this.childNodes.splice(index, 0, child);\n    }\n\n    this.updateLeafState();\n  }\n\n  insertBefore(child, ref) {\n    let index;\n\n    if (ref) {\n      index = this.childNodes.indexOf(ref);\n    }\n\n    this.insertChild(child, index);\n  }\n\n  insertAfter(child, ref) {\n    let index;\n\n    if (ref) {\n      index = this.childNodes.indexOf(ref);\n      if (index !== -1) index += 1;\n    }\n\n    this.insertChild(child, index);\n  }\n\n  removeChild(child) {\n    const children = this.getChildren() || [];\n    const dataIndex = children.indexOf(child.data);\n\n    if (dataIndex > -1) {\n      children.splice(dataIndex, 1);\n    }\n\n    const index = this.childNodes.indexOf(child);\n\n    if (index > -1) {\n      this.store && this.store.deregisterNode(child);\n      child.parent = null;\n      this.childNodes.splice(index, 1);\n    }\n\n    this.updateLeafState();\n  }\n\n  removeChildByData(data) {\n    let targetNode = null;\n\n    for (let i = 0; i < this.childNodes.length; i++) {\n      if (this.childNodes[i].data === data) {\n        targetNode = this.childNodes[i];\n        break;\n      }\n    }\n\n    if (targetNode) {\n      this.removeChild(targetNode);\n    }\n  }\n\n  expand(callback, expandParent) {\n    const done = () => {\n      if (expandParent) {\n        let parent = this.parent;\n\n        while (parent.level > 0) {\n          parent.expanded = true;\n          parent = parent.parent;\n        }\n      }\n\n      this.expanded = true;\n      if (callback) callback();\n      this.childNodes.forEach(item => {\n        item.canFocus = true;\n      });\n    };\n\n    if (this.shouldLoadData()) {\n      this.loadData(data => {\n        if (Array.isArray(data)) {\n          if (this.checked) {\n            this.setChecked(true, true);\n          } else if (!this.store.checkStrictly) {\n            reInitChecked(this);\n          }\n\n          done();\n        }\n      });\n    } else {\n      done();\n    }\n  }\n\n  doCreateChildren(array, defaultProps = {}) {\n    array.forEach(item => {\n      this.insertChild(Object.assign({\n        data: item\n      }, defaultProps), void 0, true);\n    });\n  }\n\n  collapse() {\n    this.expanded = false;\n    this.childNodes.forEach(item => {\n      item.canFocus = false;\n    });\n  }\n\n  shouldLoadData() {\n    return this.store.lazy === true && this.store.load && !this.loaded;\n  }\n\n  updateLeafState() {\n    if (this.store.lazy === true && this.loaded !== true && typeof this.isLeafByUser !== \"undefined\") {\n      this.isLeaf = this.isLeafByUser;\n      return;\n    }\n\n    const childNodes = this.childNodes;\n\n    if (!this.store.lazy || this.store.lazy === true && this.loaded === true) {\n      this.isLeaf = !childNodes || childNodes.length === 0;\n      return;\n    }\n\n    this.isLeaf = false;\n  }\n\n  setChecked(value, deep, recursion, passValue) {\n    this.indeterminate = value === \"half\";\n    this.checked = value === true;\n    if (this.store.checkStrictly) return;\n\n    if (!(this.shouldLoadData() && !this.store.checkDescendants)) {\n      const {\n        all,\n        allWithoutDisable\n      } = getChildState(this.childNodes);\n\n      if (!this.isLeaf && !all && allWithoutDisable) {\n        this.checked = false;\n        value = false;\n      }\n\n      const handleDescendants = () => {\n        if (deep) {\n          const childNodes = this.childNodes;\n\n          for (let i = 0, j = childNodes.length; i < j; i++) {\n            const child = childNodes[i];\n            passValue = passValue || value !== false;\n            const isCheck = child.disabled ? child.checked : passValue;\n            child.setChecked(isCheck, deep, true, passValue);\n          }\n\n          const {\n            half,\n            all: all2\n          } = getChildState(childNodes);\n\n          if (!all2) {\n            this.checked = all2;\n            this.indeterminate = half;\n          }\n        }\n      };\n\n      if (this.shouldLoadData()) {\n        this.loadData(() => {\n          handleDescendants();\n          reInitChecked(this);\n        }, {\n          checked: value !== false\n        });\n        return;\n      } else {\n        handleDescendants();\n      }\n    }\n\n    const parent = this.parent;\n    if (!parent || parent.level === 0) return;\n\n    if (!recursion) {\n      reInitChecked(parent);\n    }\n  }\n\n  getChildren(forceInit = false) {\n    if (this.level === 0) return this.data;\n    const data = this.data;\n    if (!data) return null;\n    const props = this.store.props;\n    let children = \"children\";\n\n    if (props) {\n      children = props.children || \"children\";\n    }\n\n    if (data[children] === void 0) {\n      data[children] = null;\n    }\n\n    if (forceInit && !data[children]) {\n      data[children] = [];\n    }\n\n    return data[children];\n  }\n\n  updateChildren() {\n    const newData = this.getChildren() || [];\n    const oldData = this.childNodes.map(node => node.data);\n    const newDataMap = {};\n    const newNodes = [];\n    newData.forEach((item, index) => {\n      const key = item[NODE_KEY];\n      const isNodeExists = !!key && oldData.findIndex(data => data[NODE_KEY] === key) >= 0;\n\n      if (isNodeExists) {\n        newDataMap[key] = {\n          index,\n          data: item\n        };\n      } else {\n        newNodes.push({\n          index,\n          data: item\n        });\n      }\n    });\n\n    if (!this.store.lazy) {\n      oldData.forEach(item => {\n        if (!newDataMap[item[NODE_KEY]]) this.removeChildByData(item);\n      });\n    }\n\n    newNodes.forEach(({\n      index,\n      data\n    }) => {\n      this.insertChild({\n        data\n      }, index);\n    });\n    this.updateLeafState();\n  }\n\n  loadData(callback, defaultProps = {}) {\n    if (this.store.lazy === true && this.store.load && !this.loaded && (!this.loading || Object.keys(defaultProps).length)) {\n      this.loading = true;\n\n      const resolve = children => {\n        this.loaded = true;\n        this.loading = false;\n        this.childNodes = [];\n        this.doCreateChildren(children, defaultProps);\n        this.updateLeafState();\n\n        if (callback) {\n          callback.call(this, children);\n        }\n      };\n\n      this.store.load(this, resolve);\n    } else {\n      if (callback) {\n        callback.call(this);\n      }\n    }\n  }\n\n}\n\nvar Node$1 = Node;\n\nclass TreeStore {\n  constructor(options) {\n    this.currentNode = null;\n    this.currentNodeKey = null;\n\n    for (const option in options) {\n      if (hasOwn(options, option)) {\n        this[option] = options[option];\n      }\n    }\n\n    this.nodesMap = {};\n  }\n\n  initialize() {\n    this.root = new Node$1({\n      data: this.data,\n      store: this\n    });\n    this.root.initialize();\n\n    if (this.lazy && this.load) {\n      const loadFn = this.load;\n      loadFn(this.root, data => {\n        this.root.doCreateChildren(data);\n\n        this._initDefaultCheckedNodes();\n      });\n    } else {\n      this._initDefaultCheckedNodes();\n    }\n  }\n\n  filter(value) {\n    const filterNodeMethod = this.filterNodeMethod;\n    const lazy = this.lazy;\n\n    const traverse = function (node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes;\n      childNodes.forEach(child => {\n        child.visible = filterNodeMethod.call(child, value, child.data, child);\n        traverse(child);\n      });\n\n      if (!node.visible && childNodes.length) {\n        let allHidden = true;\n        allHidden = !childNodes.some(child => child.visible);\n\n        if (node.root) {\n          node.root.visible = allHidden === false;\n        } else {\n          node.visible = allHidden === false;\n        }\n      }\n\n      if (!value) return;\n      if (node.visible && !node.isLeaf && !lazy) node.expand();\n    };\n\n    traverse(this);\n  }\n\n  setData(newVal) {\n    const instanceChanged = newVal !== this.root.data;\n\n    if (instanceChanged) {\n      this.root.setData(newVal);\n\n      this._initDefaultCheckedNodes();\n    } else {\n      this.root.updateChildren();\n    }\n  }\n\n  getNode(data) {\n    if (data instanceof Node$1) return data;\n    const key = typeof data !== \"object\" ? data : getNodeKey(this.key, data);\n    return this.nodesMap[key] || null;\n  }\n\n  insertBefore(data, refData) {\n    const refNode = this.getNode(refData);\n    refNode.parent.insertBefore({\n      data\n    }, refNode);\n  }\n\n  insertAfter(data, refData) {\n    const refNode = this.getNode(refData);\n    refNode.parent.insertAfter({\n      data\n    }, refNode);\n  }\n\n  remove(data) {\n    const node = this.getNode(data);\n\n    if (node && node.parent) {\n      if (node === this.currentNode) {\n        this.currentNode = null;\n      }\n\n      node.parent.removeChild(node);\n    }\n  }\n\n  append(data, parentData) {\n    const parentNode = parentData ? this.getNode(parentData) : this.root;\n\n    if (parentNode) {\n      parentNode.insertChild({\n        data\n      });\n    }\n  }\n\n  _initDefaultCheckedNodes() {\n    const defaultCheckedKeys = this.defaultCheckedKeys || [];\n    const nodesMap = this.nodesMap;\n    defaultCheckedKeys.forEach(checkedKey => {\n      const node = nodesMap[checkedKey];\n\n      if (node) {\n        node.setChecked(true, !this.checkStrictly);\n      }\n    });\n  }\n\n  _initDefaultCheckedNode(node) {\n    const defaultCheckedKeys = this.defaultCheckedKeys || [];\n\n    if (defaultCheckedKeys.indexOf(node.key) !== -1) {\n      node.setChecked(true, !this.checkStrictly);\n    }\n  }\n\n  setDefaultCheckedKey(newVal) {\n    if (newVal !== this.defaultCheckedKeys) {\n      this.defaultCheckedKeys = newVal;\n\n      this._initDefaultCheckedNodes();\n    }\n  }\n\n  registerNode(node) {\n    const key = this.key;\n    if (!node || !node.data) return;\n\n    if (!key) {\n      this.nodesMap[node.id] = node;\n    } else {\n      const nodeKey = node.key;\n      if (nodeKey !== void 0) this.nodesMap[node.key] = node;\n    }\n  }\n\n  deregisterNode(node) {\n    const key = this.key;\n    if (!key || !node || !node.data) return;\n    node.childNodes.forEach(child => {\n      this.deregisterNode(child);\n    });\n    delete this.nodesMap[node.key];\n  }\n\n  getCheckedNodes(leafOnly = false, includeHalfChecked = false) {\n    const checkedNodes = [];\n\n    const traverse = function (node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes;\n      childNodes.forEach(child => {\n        if ((child.checked || includeHalfChecked && child.indeterminate) && (!leafOnly || leafOnly && child.isLeaf)) {\n          checkedNodes.push(child.data);\n        }\n\n        traverse(child);\n      });\n    };\n\n    traverse(this);\n    return checkedNodes;\n  }\n\n  getCheckedKeys(leafOnly = false) {\n    return this.getCheckedNodes(leafOnly).map(data => (data || {})[this.key]);\n  }\n\n  getHalfCheckedNodes() {\n    const nodes = [];\n\n    const traverse = function (node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes;\n      childNodes.forEach(child => {\n        if (child.indeterminate) {\n          nodes.push(child.data);\n        }\n\n        traverse(child);\n      });\n    };\n\n    traverse(this);\n    return nodes;\n  }\n\n  getHalfCheckedKeys() {\n    return this.getHalfCheckedNodes().map(data => (data || {})[this.key]);\n  }\n\n  _getAllNodes() {\n    const allNodes = [];\n    const nodesMap = this.nodesMap;\n\n    for (const nodeKey in nodesMap) {\n      if (hasOwn(nodesMap, nodeKey)) {\n        allNodes.push(nodesMap[nodeKey]);\n      }\n    }\n\n    return allNodes;\n  }\n\n  updateChildren(key, data) {\n    const node = this.nodesMap[key];\n    if (!node) return;\n    const childNodes = node.childNodes;\n\n    for (let i = childNodes.length - 1; i >= 0; i--) {\n      const child = childNodes[i];\n      this.remove(child.data);\n    }\n\n    for (let i = 0, j = data.length; i < j; i++) {\n      const child = data[i];\n      this.append(child, node.data);\n    }\n  }\n\n  _setCheckedKeys(key, leafOnly = false, checkedKeys) {\n    const allNodes = this._getAllNodes().sort((a, b) => b.level - a.level);\n\n    const cache = Object.create(null);\n    const keys = Object.keys(checkedKeys);\n    allNodes.forEach(node => node.setChecked(false, false));\n\n    for (let i = 0, j = allNodes.length; i < j; i++) {\n      const node = allNodes[i];\n      const nodeKey = node.data[key].toString();\n      const checked = keys.indexOf(nodeKey) > -1;\n\n      if (!checked) {\n        if (node.checked && !cache[nodeKey]) {\n          node.setChecked(false, false);\n        }\n\n        continue;\n      }\n\n      let parent = node.parent;\n\n      while (parent && parent.level > 0) {\n        cache[parent.data[key]] = true;\n        parent = parent.parent;\n      }\n\n      if (node.isLeaf || this.checkStrictly) {\n        node.setChecked(true, false);\n        continue;\n      }\n\n      node.setChecked(true, true);\n\n      if (leafOnly) {\n        node.setChecked(false, false);\n\n        const traverse = function (node2) {\n          const childNodes = node2.childNodes;\n          childNodes.forEach(child => {\n            if (!child.isLeaf) {\n              child.setChecked(false, false);\n            }\n\n            traverse(child);\n          });\n        };\n\n        traverse(node);\n      }\n    }\n  }\n\n  setCheckedNodes(array, leafOnly = false) {\n    const key = this.key;\n    const checkedKeys = {};\n    array.forEach(item => {\n      checkedKeys[(item || {})[key]] = true;\n    });\n\n    this._setCheckedKeys(key, leafOnly, checkedKeys);\n  }\n\n  setCheckedKeys(keys, leafOnly = false) {\n    this.defaultCheckedKeys = keys;\n    const key = this.key;\n    const checkedKeys = {};\n    keys.forEach(key2 => {\n      checkedKeys[key2] = true;\n    });\n\n    this._setCheckedKeys(key, leafOnly, checkedKeys);\n  }\n\n  setDefaultExpandedKeys(keys) {\n    keys = keys || [];\n    this.defaultExpandedKeys = keys;\n    keys.forEach(key => {\n      const node = this.getNode(key);\n      if (node) node.expand(null, this.autoExpandParent);\n    });\n  }\n\n  setChecked(data, checked, deep) {\n    const node = this.getNode(data);\n\n    if (node) {\n      node.setChecked(!!checked, deep);\n    }\n  }\n\n  getCurrentNode() {\n    return this.currentNode;\n  }\n\n  setCurrentNode(currentNode) {\n    const prevCurrentNode = this.currentNode;\n\n    if (prevCurrentNode) {\n      prevCurrentNode.isCurrent = false;\n    }\n\n    this.currentNode = currentNode;\n    this.currentNode.isCurrent = true;\n  }\n\n  setUserCurrentNode(node, shouldAutoExpandParent = true) {\n    const key = node[this.key];\n    const currNode = this.nodesMap[key];\n    this.setCurrentNode(currNode);\n\n    if (shouldAutoExpandParent && this.currentNode.level > 1) {\n      this.currentNode.parent.expand(null, true);\n    }\n  }\n\n  setCurrentNodeKey(key, shouldAutoExpandParent = true) {\n    if (key === null || key === void 0) {\n      this.currentNode && (this.currentNode.isCurrent = false);\n      this.currentNode = null;\n      return;\n    }\n\n    const node = this.getNode(key);\n\n    if (node) {\n      this.setCurrentNode(node);\n\n      if (shouldAutoExpandParent && this.currentNode.level > 1) {\n        this.currentNode.parent.expand(null, true);\n      }\n    }\n  }\n\n}\n\nvar script$2 = defineComponent({\n  name: \"ElTreeNodeContent\",\n  props: {\n    node: {\n      type: Object,\n      required: true\n    },\n    renderContent: Function\n  },\n\n  setup(props) {\n    const nodeInstance = inject(\"NodeInstance\");\n    const tree = inject(\"RootTree\");\n    return () => {\n      const node = props.node;\n      const {\n        data,\n        store\n      } = node;\n      return props.renderContent ? props.renderContent(h, {\n        _self: nodeInstance,\n        node,\n        data,\n        store\n      }) : tree.ctx.slots.default ? tree.ctx.slots.default({\n        node,\n        data\n      }) : h(\"span\", {\n        class: \"el-tree-node__label\"\n      }, [node.label]);\n    };\n  }\n\n});\nscript$2.__file = \"packages/components/tree/src/tree-node-content.vue\";\n\nfunction useNodeExpandEventBroadcast(props) {\n  const parentNodeMap = inject(\"TreeNodeMap\", null);\n  const currentNodeMap = {\n    treeNodeExpand: node => {\n      if (props.node !== node) {\n        props.node.collapse();\n      }\n    },\n    children: []\n  };\n\n  if (parentNodeMap) {\n    parentNodeMap.children.push(currentNodeMap);\n  }\n\n  provide(\"TreeNodeMap\", currentNodeMap);\n  return {\n    broadcastExpanded: node => {\n      if (!props.accordion) return;\n\n      for (const childNode of currentNodeMap.children) {\n        childNode.treeNodeExpand(node);\n      }\n    }\n  };\n}\n\nconst dragEventsKey = Symbol(\"dragEvents\");\n\nfunction useDragNodeHandler({\n  props,\n  ctx,\n  el$,\n  dropIndicator$,\n  store\n}) {\n  const dragState = ref({\n    showDropIndicator: false,\n    draggingNode: null,\n    dropNode: null,\n    allowDrop: true,\n    dropType: null\n  });\n\n  const treeNodeDragStart = ({\n    event,\n    treeNode\n  }) => {\n    if (typeof props.allowDrag === \"function\" && !props.allowDrag(treeNode.node)) {\n      event.preventDefault();\n      return false;\n    }\n\n    event.dataTransfer.effectAllowed = \"move\";\n\n    try {\n      event.dataTransfer.setData(\"text/plain\", \"\");\n    } catch (e) {}\n\n    dragState.value.draggingNode = treeNode;\n    ctx.emit(\"node-drag-start\", treeNode.node, event);\n  };\n\n  const treeNodeDragOver = ({\n    event,\n    treeNode\n  }) => {\n    const dropNode = treeNode;\n    const oldDropNode = dragState.value.dropNode;\n\n    if (oldDropNode && oldDropNode !== dropNode) {\n      removeClass(oldDropNode.$el, \"is-drop-inner\");\n    }\n\n    const draggingNode = dragState.value.draggingNode;\n    if (!draggingNode || !dropNode) return;\n    let dropPrev = true;\n    let dropInner = true;\n    let dropNext = true;\n    let userAllowDropInner = true;\n\n    if (typeof props.allowDrop === \"function\") {\n      dropPrev = props.allowDrop(draggingNode.node, dropNode.node, \"prev\");\n      userAllowDropInner = dropInner = props.allowDrop(draggingNode.node, dropNode.node, \"inner\");\n      dropNext = props.allowDrop(draggingNode.node, dropNode.node, \"next\");\n    }\n\n    event.dataTransfer.dropEffect = dropInner ? \"move\" : \"none\";\n\n    if ((dropPrev || dropInner || dropNext) && oldDropNode !== dropNode) {\n      if (oldDropNode) {\n        ctx.emit(\"node-drag-leave\", draggingNode.node, oldDropNode.node, event);\n      }\n\n      ctx.emit(\"node-drag-enter\", draggingNode.node, dropNode.node, event);\n    }\n\n    if (dropPrev || dropInner || dropNext) {\n      dragState.value.dropNode = dropNode;\n    }\n\n    if (dropNode.node.nextSibling === draggingNode.node) {\n      dropNext = false;\n    }\n\n    if (dropNode.node.previousSibling === draggingNode.node) {\n      dropPrev = false;\n    }\n\n    if (dropNode.node.contains(draggingNode.node, false)) {\n      dropInner = false;\n    }\n\n    if (draggingNode.node === dropNode.node || draggingNode.node.contains(dropNode.node)) {\n      dropPrev = false;\n      dropInner = false;\n      dropNext = false;\n    }\n\n    const targetPosition = dropNode.$el.getBoundingClientRect();\n    const treePosition = el$.value.getBoundingClientRect();\n    let dropType;\n    const prevPercent = dropPrev ? dropInner ? 0.25 : dropNext ? 0.45 : 1 : -1;\n    const nextPercent = dropNext ? dropInner ? 0.75 : dropPrev ? 0.55 : 0 : 1;\n    let indicatorTop = -9999;\n    const distance = event.clientY - targetPosition.top;\n\n    if (distance < targetPosition.height * prevPercent) {\n      dropType = \"before\";\n    } else if (distance > targetPosition.height * nextPercent) {\n      dropType = \"after\";\n    } else if (dropInner) {\n      dropType = \"inner\";\n    } else {\n      dropType = \"none\";\n    }\n\n    const iconPosition = dropNode.$el.querySelector(\".el-tree-node__expand-icon\").getBoundingClientRect();\n    const dropIndicator = dropIndicator$.value;\n\n    if (dropType === \"before\") {\n      indicatorTop = iconPosition.top - treePosition.top;\n    } else if (dropType === \"after\") {\n      indicatorTop = iconPosition.bottom - treePosition.top;\n    }\n\n    dropIndicator.style.top = `${indicatorTop}px`;\n    dropIndicator.style.left = `${iconPosition.right - treePosition.left}px`;\n\n    if (dropType === \"inner\") {\n      addClass(dropNode.$el, \"is-drop-inner\");\n    } else {\n      removeClass(dropNode.$el, \"is-drop-inner\");\n    }\n\n    dragState.value.showDropIndicator = dropType === \"before\" || dropType === \"after\";\n    dragState.value.allowDrop = dragState.value.showDropIndicator || userAllowDropInner;\n    dragState.value.dropType = dropType;\n    ctx.emit(\"node-drag-over\", draggingNode.node, dropNode.node, event);\n  };\n\n  const treeNodeDragEnd = event => {\n    const {\n      draggingNode,\n      dropType,\n      dropNode\n    } = dragState.value;\n    event.preventDefault();\n    event.dataTransfer.dropEffect = \"move\";\n\n    if (draggingNode && dropNode) {\n      const draggingNodeCopy = {\n        data: draggingNode.node.data\n      };\n\n      if (dropType !== \"none\") {\n        draggingNode.node.remove();\n      }\n\n      if (dropType === \"before\") {\n        dropNode.node.parent.insertBefore(draggingNodeCopy, dropNode.node);\n      } else if (dropType === \"after\") {\n        dropNode.node.parent.insertAfter(draggingNodeCopy, dropNode.node);\n      } else if (dropType === \"inner\") {\n        dropNode.node.insertChild(draggingNodeCopy);\n      }\n\n      if (dropType !== \"none\") {\n        store.value.registerNode(draggingNodeCopy);\n      }\n\n      removeClass(dropNode.$el, \"is-drop-inner\");\n      ctx.emit(\"node-drag-end\", draggingNode.node, dropNode.node, dropType, event);\n\n      if (dropType !== \"none\") {\n        ctx.emit(\"node-drop\", draggingNode.node, dropNode.node, dropType, event);\n      }\n    }\n\n    if (draggingNode && !dropNode) {\n      ctx.emit(\"node-drag-end\", draggingNode.node, null, dropType, event);\n    }\n\n    dragState.value.showDropIndicator = false;\n    dragState.value.draggingNode = null;\n    dragState.value.dropNode = null;\n    dragState.value.allowDrop = true;\n  };\n\n  provide(dragEventsKey, {\n    treeNodeDragStart,\n    treeNodeDragOver,\n    treeNodeDragEnd\n  });\n  return {\n    dragState\n  };\n}\n\nvar script$1 = defineComponent({\n  name: \"ElTreeNode\",\n  components: {\n    ElCollapseTransition,\n    ElCheckbox,\n    NodeContent: script$2\n  },\n  props: {\n    node: {\n      type: Node$1,\n      default: () => ({})\n    },\n    props: {\n      type: Object,\n      default: () => ({})\n    },\n    accordion: Boolean,\n    renderContent: Function,\n    renderAfterExpand: Boolean,\n    showCheckbox: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"node-expand\"],\n\n  setup(props, ctx) {\n    const {\n      broadcastExpanded\n    } = useNodeExpandEventBroadcast(props);\n    const tree = inject(\"RootTree\");\n    const expanded = ref(false);\n    const childNodeRendered = ref(false);\n    const oldChecked = ref(null);\n    const oldIndeterminate = ref(null);\n    const node$ = ref(null);\n    const dragEvents = inject(dragEventsKey);\n    const instance = getCurrentInstance();\n    provide(\"NodeInstance\", instance);\n\n    if (!tree) {\n      debugWarn(\"Tree\", \"Can not find node's tree.\");\n    }\n\n    if (props.node.expanded) {\n      expanded.value = true;\n      childNodeRendered.value = true;\n    }\n\n    const childrenKey = tree.props[\"children\"] || \"children\";\n    watch(() => {\n      const children = props.node.data[childrenKey];\n      return children && [...children];\n    }, () => {\n      props.node.updateChildren();\n    });\n    watch(() => props.node.indeterminate, val => {\n      handleSelectChange(props.node.checked, val);\n    });\n    watch(() => props.node.checked, val => {\n      handleSelectChange(val, props.node.indeterminate);\n    });\n    watch(() => props.node.expanded, val => {\n      nextTick(() => expanded.value = val);\n\n      if (val) {\n        childNodeRendered.value = true;\n      }\n    });\n\n    const getNodeKey$1 = node => {\n      return getNodeKey(tree.props.nodeKey, node.data);\n    };\n\n    const handleSelectChange = (checked, indeterminate) => {\n      if (oldChecked.value !== checked || oldIndeterminate.value !== indeterminate) {\n        tree.ctx.emit(\"check-change\", props.node.data, checked, indeterminate);\n      }\n\n      oldChecked.value = checked;\n      oldIndeterminate.value = indeterminate;\n    };\n\n    const handleClick = () => {\n      const store = tree.store.value;\n      store.setCurrentNode(props.node);\n      tree.ctx.emit(\"current-change\", store.currentNode ? store.currentNode.data : null, store.currentNode);\n      tree.currentNode.value = props.node;\n\n      if (tree.props.expandOnClickNode) {\n        handleExpandIconClick();\n      }\n\n      if (tree.props.checkOnClickNode && !props.node.disabled) {\n        handleCheckChange(null, {\n          target: {\n            checked: !props.node.checked\n          }\n        });\n      }\n\n      tree.ctx.emit(\"node-click\", props.node.data, props.node, instance);\n    };\n\n    const handleContextMenu = event => {\n      if (tree.instance.vnode.props[\"onNodeContextmenu\"]) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n\n      tree.ctx.emit(\"node-contextmenu\", event, props.node.data, props.node, instance);\n    };\n\n    const handleExpandIconClick = () => {\n      if (props.node.isLeaf) return;\n\n      if (expanded.value) {\n        tree.ctx.emit(\"node-collapse\", props.node.data, props.node, instance);\n        props.node.collapse();\n      } else {\n        props.node.expand();\n        ctx.emit(\"node-expand\", props.node.data, props.node, instance);\n      }\n    };\n\n    const handleCheckChange = (value, ev) => {\n      props.node.setChecked(ev.target.checked, !tree.props.checkStrictly);\n      nextTick(() => {\n        const store = tree.store.value;\n        tree.ctx.emit(\"check\", props.node.data, {\n          checkedNodes: store.getCheckedNodes(),\n          checkedKeys: store.getCheckedKeys(),\n          halfCheckedNodes: store.getHalfCheckedNodes(),\n          halfCheckedKeys: store.getHalfCheckedKeys()\n        });\n      });\n    };\n\n    const handleChildNodeExpand = (nodeData, node, instance2) => {\n      broadcastExpanded(node);\n      tree.ctx.emit(\"node-expand\", nodeData, node, instance2);\n    };\n\n    const handleDragStart = event => {\n      if (!tree.props.draggable) return;\n      dragEvents.treeNodeDragStart({\n        event,\n        treeNode: props\n      });\n    };\n\n    const handleDragOver = event => {\n      if (!tree.props.draggable) return;\n      dragEvents.treeNodeDragOver({\n        event,\n        treeNode: {\n          $el: node$.value,\n          node: props.node\n        }\n      });\n      event.preventDefault();\n    };\n\n    const handleDrop = event => {\n      event.preventDefault();\n    };\n\n    const handleDragEnd = event => {\n      if (!tree.props.draggable) return;\n      dragEvents.treeNodeDragEnd(event);\n    };\n\n    return {\n      node$,\n      tree,\n      expanded,\n      childNodeRendered,\n      oldChecked,\n      oldIndeterminate,\n      getNodeKey: getNodeKey$1,\n      handleSelectChange,\n      handleClick,\n      handleContextMenu,\n      handleExpandIconClick,\n      handleCheckChange,\n      handleChildNodeExpand,\n      handleDragStart,\n      handleDragOver,\n      handleDrop,\n      handleDragEnd\n    };\n  }\n\n});\nconst _hoisted_1$1 = [\"aria-expanded\", \"aria-disabled\", \"aria-checked\", \"draggable\", \"data-key\"];\nconst _hoisted_2$1 = {\n  key: 1,\n  class: \"el-tree-node__loading-icon el-icon-loading\"\n};\nconst _hoisted_3$1 = [\"aria-expanded\"];\n\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_checkbox = resolveComponent(\"el-checkbox\");\n\n  const _component_node_content = resolveComponent(\"node-content\");\n\n  const _component_el_tree_node = resolveComponent(\"el-tree-node\");\n\n  const _component_el_collapse_transition = resolveComponent(\"el-collapse-transition\");\n\n  return withDirectives((openBlock(), createElementBlock(\"div\", {\n    ref: \"node$\",\n    class: normalizeClass([\"el-tree-node\", {\n      \"is-expanded\": _ctx.expanded,\n      \"is-current\": _ctx.node.isCurrent,\n      \"is-hidden\": !_ctx.node.visible,\n      \"is-focusable\": !_ctx.node.disabled,\n      \"is-checked\": !_ctx.node.disabled && _ctx.node.checked\n    }]),\n    role: \"treeitem\",\n    tabindex: \"-1\",\n    \"aria-expanded\": _ctx.expanded,\n    \"aria-disabled\": _ctx.node.disabled,\n    \"aria-checked\": _ctx.node.checked,\n    draggable: _ctx.tree.props.draggable,\n    \"data-key\": _ctx.getNodeKey(_ctx.node),\n    onClick: _cache[2] || (_cache[2] = withModifiers((...args) => _ctx.handleClick && _ctx.handleClick(...args), [\"stop\"])),\n    onContextmenu: _cache[3] || (_cache[3] = (...args) => _ctx.handleContextMenu && _ctx.handleContextMenu(...args)),\n    onDragstart: _cache[4] || (_cache[4] = withModifiers((...args) => _ctx.handleDragStart && _ctx.handleDragStart(...args), [\"stop\"])),\n    onDragover: _cache[5] || (_cache[5] = withModifiers((...args) => _ctx.handleDragOver && _ctx.handleDragOver(...args), [\"stop\"])),\n    onDragend: _cache[6] || (_cache[6] = withModifiers((...args) => _ctx.handleDragEnd && _ctx.handleDragEnd(...args), [\"stop\"])),\n    onDrop: _cache[7] || (_cache[7] = withModifiers((...args) => _ctx.handleDrop && _ctx.handleDrop(...args), [\"stop\"]))\n  }, [createElementVNode(\"div\", {\n    class: \"el-tree-node__content\",\n    style: normalizeStyle({\n      paddingLeft: (_ctx.node.level - 1) * _ctx.tree.props.indent + \"px\"\n    })\n  }, [createElementVNode(\"span\", {\n    class: normalizeClass([{\n      \"is-leaf\": _ctx.node.isLeaf,\n      expanded: !_ctx.node.isLeaf && _ctx.expanded\n    }, \"el-tree-node__expand-icon\", _ctx.tree.props.iconClass ? _ctx.tree.props.iconClass : \"el-icon-caret-right\"]),\n    onClick: _cache[0] || (_cache[0] = withModifiers((...args) => _ctx.handleExpandIconClick && _ctx.handleExpandIconClick(...args), [\"stop\"]))\n  }, null, 2), _ctx.showCheckbox ? (openBlock(), createBlock(_component_el_checkbox, {\n    key: 0,\n    \"model-value\": _ctx.node.checked,\n    indeterminate: _ctx.node.indeterminate,\n    disabled: !!_ctx.node.disabled,\n    onClick: _cache[1] || (_cache[1] = withModifiers(() => {}, [\"stop\"])),\n    onChange: _ctx.handleCheckChange\n  }, null, 8, [\"model-value\", \"indeterminate\", \"disabled\", \"onChange\"])) : createCommentVNode(\"v-if\", true), _ctx.node.loading ? (openBlock(), createElementBlock(\"span\", _hoisted_2$1)) : createCommentVNode(\"v-if\", true), createVNode(_component_node_content, {\n    node: _ctx.node,\n    \"render-content\": _ctx.renderContent\n  }, null, 8, [\"node\", \"render-content\"])], 4), createVNode(_component_el_collapse_transition, null, {\n    default: withCtx(() => [!_ctx.renderAfterExpand || _ctx.childNodeRendered ? withDirectives((openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: \"el-tree-node__children\",\n      role: \"group\",\n      \"aria-expanded\": _ctx.expanded\n    }, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.node.childNodes, child => {\n      return openBlock(), createBlock(_component_el_tree_node, {\n        key: _ctx.getNodeKey(child),\n        \"render-content\": _ctx.renderContent,\n        \"render-after-expand\": _ctx.renderAfterExpand,\n        \"show-checkbox\": _ctx.showCheckbox,\n        node: child,\n        onNodeExpand: _ctx.handleChildNodeExpand\n      }, null, 8, [\"render-content\", \"render-after-expand\", \"show-checkbox\", \"node\", \"onNodeExpand\"]);\n    }), 128))], 8, _hoisted_3$1)), [[vShow, _ctx.expanded]]) : createCommentVNode(\"v-if\", true)]),\n    _: 1\n  })], 42, _hoisted_1$1)), [[vShow, _ctx.node.visible]]);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/components/tree/src/tree-node.vue\";\n\nfunction useKeydown({\n  el$\n}, store) {\n  const treeItems = shallowRef([]);\n  const checkboxItems = shallowRef([]);\n  onMounted(() => {\n    initTabIndex();\n    on(el$.value, \"keydown\", handleKeydown);\n  });\n  onBeforeUnmount(() => {\n    off(el$.value, \"keydown\", handleKeydown);\n  });\n  onUpdated(() => {\n    treeItems.value = Array.from(el$.value.querySelectorAll(\"[role=treeitem]\"));\n    checkboxItems.value = Array.from(el$.value.querySelectorAll(\"input[type=checkbox]\"));\n  });\n  watch(checkboxItems, val => {\n    val.forEach(checkbox => {\n      checkbox.setAttribute(\"tabindex\", \"-1\");\n    });\n  });\n\n  const handleKeydown = ev => {\n    const currentItem = ev.target;\n    if (currentItem.className.indexOf(\"el-tree-node\") === -1) return;\n    const code = ev.code;\n    treeItems.value = Array.from(el$.value.querySelectorAll(\".is-focusable[role=treeitem]\"));\n    const currentIndex = treeItems.value.indexOf(currentItem);\n    let nextIndex;\n\n    if ([EVENT_CODE.up, EVENT_CODE.down].indexOf(code) > -1) {\n      ev.preventDefault();\n\n      if (code === EVENT_CODE.up) {\n        nextIndex = currentIndex === -1 ? 0 : currentIndex !== 0 ? currentIndex - 1 : treeItems.value.length - 1;\n        const startIndex = nextIndex;\n\n        while (true) {\n          if (store.value.getNode(treeItems.value[nextIndex].dataset.key).canFocus) break;\n          nextIndex--;\n\n          if (nextIndex === startIndex) {\n            nextIndex = -1;\n            break;\n          }\n\n          if (nextIndex < 0) {\n            nextIndex = treeItems.value.length - 1;\n          }\n        }\n      } else {\n        nextIndex = currentIndex === -1 ? 0 : currentIndex < treeItems.value.length - 1 ? currentIndex + 1 : 0;\n        const startIndex = nextIndex;\n\n        while (true) {\n          if (store.value.getNode(treeItems.value[nextIndex].dataset.key).canFocus) break;\n          nextIndex++;\n\n          if (nextIndex === startIndex) {\n            nextIndex = -1;\n            break;\n          }\n\n          if (nextIndex >= treeItems.value.length) {\n            nextIndex = 0;\n          }\n        }\n      }\n\n      nextIndex !== -1 && treeItems.value[nextIndex].focus();\n    }\n\n    if ([EVENT_CODE.left, EVENT_CODE.right].indexOf(code) > -1) {\n      ev.preventDefault();\n      currentItem.click();\n    }\n\n    const hasInput = currentItem.querySelector('[type=\"checkbox\"]');\n\n    if ([EVENT_CODE.enter, EVENT_CODE.space].indexOf(code) > -1 && hasInput) {\n      ev.preventDefault();\n      hasInput.click();\n    }\n  };\n\n  const initTabIndex = () => {\n    var _a;\n\n    treeItems.value = Array.from(el$.value.querySelectorAll(\".is-focusable[role=treeitem]\"));\n    checkboxItems.value = Array.from(el$.value.querySelectorAll(\"input[type=checkbox]\"));\n    const checkedItem = el$.value.querySelectorAll(\".is-checked[role=treeitem]\");\n\n    if (checkedItem.length) {\n      checkedItem[0].setAttribute(\"tabindex\", \"0\");\n      return;\n    }\n\n    (_a = treeItems.value[0]) == null ? void 0 : _a.setAttribute(\"tabindex\", \"0\");\n  };\n}\n\nvar script = defineComponent({\n  name: \"ElTree\",\n  components: {\n    ElTreeNode: script$1\n  },\n  props: {\n    data: {\n      type: Array,\n      default: () => []\n    },\n    emptyText: {\n      type: String\n    },\n    renderAfterExpand: {\n      type: Boolean,\n      default: true\n    },\n    nodeKey: String,\n    checkStrictly: Boolean,\n    defaultExpandAll: Boolean,\n    expandOnClickNode: {\n      type: Boolean,\n      default: true\n    },\n    checkOnClickNode: Boolean,\n    checkDescendants: {\n      type: Boolean,\n      default: false\n    },\n    autoExpandParent: {\n      type: Boolean,\n      default: true\n    },\n    defaultCheckedKeys: Array,\n    defaultExpandedKeys: Array,\n    currentNodeKey: [String, Number],\n    renderContent: Function,\n    showCheckbox: {\n      type: Boolean,\n      default: false\n    },\n    draggable: {\n      type: Boolean,\n      default: false\n    },\n    allowDrag: Function,\n    allowDrop: Function,\n    props: {\n      type: Object,\n      default: () => ({\n        children: \"children\",\n        label: \"label\",\n        disabled: \"disabled\"\n      })\n    },\n    lazy: {\n      type: Boolean,\n      default: false\n    },\n    highlightCurrent: Boolean,\n    load: Function,\n    filterNodeMethod: Function,\n    accordion: Boolean,\n    indent: {\n      type: Number,\n      default: 18\n    },\n    iconClass: String\n  },\n  emits: [\"check-change\", \"current-change\", \"node-click\", \"node-contextmenu\", \"node-collapse\", \"node-expand\", \"check\", \"node-drag-start\", \"node-drag-end\", \"node-drop\", \"node-drag-leave\", \"node-drag-enter\", \"node-drag-over\"],\n\n  setup(props, ctx) {\n    const {\n      t\n    } = useLocaleInject();\n    const store = ref(new TreeStore({\n      key: props.nodeKey,\n      data: props.data,\n      lazy: props.lazy,\n      props: props.props,\n      load: props.load,\n      currentNodeKey: props.currentNodeKey,\n      checkStrictly: props.checkStrictly,\n      checkDescendants: props.checkDescendants,\n      defaultCheckedKeys: props.defaultCheckedKeys,\n      defaultExpandedKeys: props.defaultExpandedKeys,\n      autoExpandParent: props.autoExpandParent,\n      defaultExpandAll: props.defaultExpandAll,\n      filterNodeMethod: props.filterNodeMethod\n    }));\n    store.value.initialize();\n    const root = ref(store.value.root);\n    const currentNode = ref(null);\n    const el$ = ref(null);\n    const dropIndicator$ = ref(null);\n    const {\n      broadcastExpanded\n    } = useNodeExpandEventBroadcast(props);\n    const {\n      dragState\n    } = useDragNodeHandler({\n      props,\n      ctx,\n      el$,\n      dropIndicator$,\n      store\n    });\n    useKeydown({\n      el$\n    }, store);\n    const isEmpty = computed(() => {\n      const {\n        childNodes\n      } = root.value;\n      return !childNodes || childNodes.length === 0 || childNodes.every(({\n        visible\n      }) => !visible);\n    });\n    watch(() => props.defaultCheckedKeys, newVal => {\n      store.value.setDefaultCheckedKey(newVal);\n    });\n    watch(() => props.defaultExpandedKeys, newVal => {\n      store.value.defaultExpandedKeys = newVal;\n      store.value.setDefaultExpandedKeys(newVal);\n    });\n    watch(() => props.data, newVal => {\n      store.value.setData(newVal);\n    }, {\n      deep: true\n    });\n    watch(() => props.checkStrictly, newVal => {\n      store.value.checkStrictly = newVal;\n    });\n\n    const filter = value => {\n      if (!props.filterNodeMethod) throw new Error(\"[Tree] filterNodeMethod is required when filter\");\n      store.value.filter(value);\n    };\n\n    const getNodeKey$1 = node => {\n      return getNodeKey(props.nodeKey, node.data);\n    };\n\n    const getNodePath = data => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in getNodePath\");\n      const node = store.value.getNode(data);\n      if (!node) return [];\n      const path = [node.data];\n      let parent = node.parent;\n\n      while (parent && parent !== root.value) {\n        path.push(parent.data);\n        parent = parent.parent;\n      }\n\n      return path.reverse();\n    };\n\n    const getCheckedNodes = (leafOnly, includeHalfChecked) => {\n      return store.value.getCheckedNodes(leafOnly, includeHalfChecked);\n    };\n\n    const getCheckedKeys = leafOnly => {\n      return store.value.getCheckedKeys(leafOnly);\n    };\n\n    const getCurrentNode = () => {\n      const currentNode2 = store.value.getCurrentNode();\n      return currentNode2 ? currentNode2.data : null;\n    };\n\n    const getCurrentKey = () => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in getCurrentKey\");\n      const currentNode2 = getCurrentNode();\n      return currentNode2 ? currentNode2[props.nodeKey] : null;\n    };\n\n    const setCheckedNodes = (nodes, leafOnly) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in setCheckedNodes\");\n      store.value.setCheckedNodes(nodes, leafOnly);\n    };\n\n    const setCheckedKeys = (keys, leafOnly) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in setCheckedKeys\");\n      store.value.setCheckedKeys(keys, leafOnly);\n    };\n\n    const setChecked = (data, checked, deep) => {\n      store.value.setChecked(data, checked, deep);\n    };\n\n    const getHalfCheckedNodes = () => {\n      return store.value.getHalfCheckedNodes();\n    };\n\n    const getHalfCheckedKeys = () => {\n      return store.value.getHalfCheckedKeys();\n    };\n\n    const setCurrentNode = (node, shouldAutoExpandParent = true) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in setCurrentNode\");\n      store.value.setUserCurrentNode(node, shouldAutoExpandParent);\n    };\n\n    const setCurrentKey = (key, shouldAutoExpandParent = true) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in setCurrentKey\");\n      store.value.setCurrentNodeKey(key, shouldAutoExpandParent);\n    };\n\n    const getNode = data => {\n      return store.value.getNode(data);\n    };\n\n    const remove = data => {\n      store.value.remove(data);\n    };\n\n    const append = (data, parentNode) => {\n      store.value.append(data, parentNode);\n    };\n\n    const insertBefore = (data, refNode) => {\n      store.value.insertBefore(data, refNode);\n    };\n\n    const insertAfter = (data, refNode) => {\n      store.value.insertAfter(data, refNode);\n    };\n\n    const handleNodeExpand = (nodeData, node, instance) => {\n      broadcastExpanded(node);\n      ctx.emit(\"node-expand\", nodeData, node, instance);\n    };\n\n    const updateKeyChildren = (key, data) => {\n      if (!props.nodeKey) throw new Error(\"[Tree] nodeKey is required in updateKeyChild\");\n      store.value.updateChildren(key, data);\n    };\n\n    provide(\"RootTree\", {\n      ctx,\n      props,\n      store,\n      root,\n      currentNode,\n      instance: getCurrentInstance()\n    });\n    return {\n      store,\n      root,\n      currentNode,\n      dragState,\n      el$,\n      dropIndicator$,\n      isEmpty,\n      filter,\n      getNodeKey: getNodeKey$1,\n      getNodePath,\n      getCheckedNodes,\n      getCheckedKeys,\n      getCurrentNode,\n      getCurrentKey,\n      setCheckedNodes,\n      setCheckedKeys,\n      setChecked,\n      getHalfCheckedNodes,\n      getHalfCheckedKeys,\n      setCurrentNode,\n      setCurrentKey,\n      t,\n      getNode,\n      remove,\n      append,\n      insertBefore,\n      insertAfter,\n      handleNodeExpand,\n      updateKeyChildren\n    };\n  }\n\n});\nconst _hoisted_1 = {\n  key: 0,\n  class: \"el-tree__empty-block\"\n};\nconst _hoisted_2 = {\n  class: \"el-tree__empty-text\"\n};\nconst _hoisted_3 = {\n  ref: \"dropIndicator$\",\n  class: \"el-tree__drop-indicator\"\n};\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_tree_node = resolveComponent(\"el-tree-node\");\n\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el$\",\n    class: normalizeClass([\"el-tree\", {\n      \"el-tree--highlight-current\": _ctx.highlightCurrent,\n      \"is-dragging\": !!_ctx.dragState.draggingNode,\n      \"is-drop-not-allow\": !_ctx.dragState.allowDrop,\n      \"is-drop-inner\": _ctx.dragState.dropType === \"inner\"\n    }]),\n    role: \"tree\"\n  }, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.root.childNodes, child => {\n    return openBlock(), createBlock(_component_el_tree_node, {\n      key: _ctx.getNodeKey(child),\n      node: child,\n      props: _ctx.props,\n      accordion: _ctx.accordion,\n      \"render-after-expand\": _ctx.renderAfterExpand,\n      \"show-checkbox\": _ctx.showCheckbox,\n      \"render-content\": _ctx.renderContent,\n      onNodeExpand: _ctx.handleNodeExpand\n    }, null, 8, [\"node\", \"props\", \"accordion\", \"render-after-expand\", \"show-checkbox\", \"render-content\", \"onNodeExpand\"]);\n  }), 128)), _ctx.isEmpty ? (openBlock(), createElementBlock(\"div\", _hoisted_1, [createElementVNode(\"span\", _hoisted_2, toDisplayString(_ctx.emptyText || _ctx.t(\"el.tree.emptyText\")), 1)])) : createCommentVNode(\"v-if\", true), withDirectives(createElementVNode(\"div\", _hoisted_3, null, 512), [[vShow, _ctx.dragState.showDropIndicator]])], 2);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/tree/src/tree.vue\";\n\nscript.install = app => {\n  app.component(script.name, script);\n};\n\nconst _Tree = script;\nconst ElTree = _Tree;\nexport { ElTree, _Tree as default };","map":{"version":3,"names":["reactive","defineComponent","inject","h","provide","ref","getCurrentInstance","watch","nextTick","resolveComponent","withDirectives","openBlock","createElementBlock","normalizeClass","withModifiers","createElementVNode","normalizeStyle","createBlock","createCommentVNode","createVNode","withCtx","Fragment","renderList","vShow","shallowRef","onMounted","onBeforeUnmount","onUpdated","computed","toDisplayString","useLocaleInject","hasOwn","ElCollapseTransition","ElCheckbox","debugWarn","removeClass","addClass","on","off","EVENT_CODE","NODE_KEY","markNodeData","node","data","Object","defineProperty","value","id","enumerable","configurable","writable","getNodeKey","key","getChildState","all","none","allWithoutDisable","i","j","length","n","checked","indeterminate","disabled","half","reInitChecked","childNodes","parent","level","store","checkStrictly","getPropertyFromData","prop","props","config","dataProp","nodeIdSeed","Node","constructor","options","text","expanded","visible","isCurrent","canFocus","name","loaded","loading","initialize","Error","registerNode","isLeaf","isLeafByUser","lazy","setData","defaultExpandAll","expand","Array","isArray","defaultExpandedKeys","indexOf","autoExpandParent","currentNodeKey","currentNode","_initDefaultCheckedNode","updateLeafState","children","insertChild","label","nodeKey","nextSibling","index","previousSibling","contains","target","deep","some","child","remove","removeChild","batch","getChildren","push","splice","assign","insertBefore","insertAfter","dataIndex","deregisterNode","removeChildByData","targetNode","callback","expandParent","done","forEach","item","shouldLoadData","loadData","setChecked","doCreateChildren","array","defaultProps","collapse","load","recursion","passValue","checkDescendants","handleDescendants","isCheck","all2","forceInit","updateChildren","newData","oldData","map","newDataMap","newNodes","isNodeExists","findIndex","keys","resolve","call","Node$1","TreeStore","option","nodesMap","root","loadFn","_initDefaultCheckedNodes","filter","filterNodeMethod","traverse","allHidden","newVal","instanceChanged","getNode","refData","refNode","append","parentData","parentNode","defaultCheckedKeys","checkedKey","setDefaultCheckedKey","getCheckedNodes","leafOnly","includeHalfChecked","checkedNodes","getCheckedKeys","getHalfCheckedNodes","nodes","getHalfCheckedKeys","_getAllNodes","allNodes","_setCheckedKeys","checkedKeys","sort","a","b","cache","create","toString","node2","setCheckedNodes","setCheckedKeys","key2","setDefaultExpandedKeys","getCurrentNode","setCurrentNode","prevCurrentNode","setUserCurrentNode","shouldAutoExpandParent","currNode","setCurrentNodeKey","script$2","type","required","renderContent","Function","setup","nodeInstance","tree","_self","ctx","slots","default","class","__file","useNodeExpandEventBroadcast","parentNodeMap","currentNodeMap","treeNodeExpand","broadcastExpanded","accordion","childNode","dragEventsKey","Symbol","useDragNodeHandler","el$","dropIndicator$","dragState","showDropIndicator","draggingNode","dropNode","allowDrop","dropType","treeNodeDragStart","event","treeNode","allowDrag","preventDefault","dataTransfer","effectAllowed","e","emit","treeNodeDragOver","oldDropNode","$el","dropPrev","dropInner","dropNext","userAllowDropInner","dropEffect","targetPosition","getBoundingClientRect","treePosition","prevPercent","nextPercent","indicatorTop","distance","clientY","top","height","iconPosition","querySelector","dropIndicator","bottom","style","left","right","treeNodeDragEnd","draggingNodeCopy","script$1","components","NodeContent","Boolean","renderAfterExpand","showCheckbox","emits","childNodeRendered","oldChecked","oldIndeterminate","node$","dragEvents","instance","childrenKey","val","handleSelectChange","getNodeKey$1","handleClick","expandOnClickNode","handleExpandIconClick","checkOnClickNode","handleCheckChange","handleContextMenu","vnode","stopPropagation","ev","halfCheckedNodes","halfCheckedKeys","handleChildNodeExpand","nodeData","instance2","handleDragStart","draggable","handleDragOver","handleDrop","handleDragEnd","_hoisted_1$1","_hoisted_2$1","_hoisted_3$1","render$1","_ctx","_cache","$props","$setup","$data","$options","_component_el_checkbox","_component_node_content","_component_el_tree_node","_component_el_collapse_transition","role","tabindex","onClick","args","onContextmenu","onDragstart","onDragover","onDragend","onDrop","paddingLeft","indent","iconClass","onChange","onNodeExpand","_","render","useKeydown","treeItems","checkboxItems","initTabIndex","handleKeydown","from","querySelectorAll","checkbox","setAttribute","currentItem","className","code","currentIndex","nextIndex","up","down","startIndex","dataset","focus","click","hasInput","enter","space","_a","checkedItem","script","ElTreeNode","emptyText","String","Number","highlightCurrent","t","isEmpty","every","getNodePath","path","reverse","currentNode2","getCurrentKey","setCurrentKey","handleNodeExpand","updateKeyChildren","_hoisted_1","_hoisted_2","_hoisted_3","install","app","component","_Tree","ElTree"],"sources":["/home/haibara/ghq/github.com/w-haibara/kakemoti-ui/node_modules/element-plus/es/components/tree/index.js"],"sourcesContent":["import { reactive, defineComponent, inject, h, provide, ref, getCurrentInstance, watch, nextTick, resolveComponent, withDirectives, openBlock, createElementBlock, normalizeClass, withModifiers, createElementVNode, normalizeStyle, createBlock, createCommentVNode, createVNode, withCtx, Fragment, renderList, vShow, shallowRef, onMounted, onBeforeUnmount, onUpdated, computed, toDisplayString } from 'vue';\nimport { useLocaleInject } from 'element-plus/es/hooks';\nimport { hasOwn } from '@vue/shared';\nimport ElCollapseTransition from 'element-plus/es/components/collapse-transition';\nimport ElCheckbox from 'element-plus/es/components/checkbox';\nimport { debugWarn } from 'element-plus/es/utils/error';\nimport { removeClass, addClass, on, off } from 'element-plus/es/utils/dom';\nimport { EVENT_CODE } from 'element-plus/es/utils/aria';\n\nconst NODE_KEY = \"$treeNodeId\";\nconst markNodeData = function(node, data) {\n  if (!data || data[NODE_KEY])\n    return;\n  Object.defineProperty(data, NODE_KEY, {\n    value: node.id,\n    enumerable: false,\n    configurable: false,\n    writable: false\n  });\n};\nconst getNodeKey = function(key, data) {\n  if (!key)\n    return data[NODE_KEY];\n  return data[key];\n};\n\nconst getChildState = (node) => {\n  let all = true;\n  let none = true;\n  let allWithoutDisable = true;\n  for (let i = 0, j = node.length; i < j; i++) {\n    const n = node[i];\n    if (n.checked !== true || n.indeterminate) {\n      all = false;\n      if (!n.disabled) {\n        allWithoutDisable = false;\n      }\n    }\n    if (n.checked !== false || n.indeterminate) {\n      none = false;\n    }\n  }\n  return { all, none, allWithoutDisable, half: !all && !none };\n};\nconst reInitChecked = function(node) {\n  if (node.childNodes.length === 0)\n    return;\n  const { all, none, half } = getChildState(node.childNodes);\n  if (all) {\n    node.checked = true;\n    node.indeterminate = false;\n  } else if (half) {\n    node.checked = false;\n    node.indeterminate = true;\n  } else if (none) {\n    node.checked = false;\n    node.indeterminate = false;\n  }\n  const parent = node.parent;\n  if (!parent || parent.level === 0)\n    return;\n  if (!node.store.checkStrictly) {\n    reInitChecked(parent);\n  }\n};\nconst getPropertyFromData = function(node, prop) {\n  const props = node.store.props;\n  const data = node.data || {};\n  const config = props[prop];\n  if (typeof config === \"function\") {\n    return config(data, node);\n  } else if (typeof config === \"string\") {\n    return data[config];\n  } else if (typeof config === \"undefined\") {\n    const dataProp = data[prop];\n    return dataProp === void 0 ? \"\" : dataProp;\n  }\n};\nlet nodeIdSeed = 0;\nclass Node {\n  constructor(options) {\n    this.id = nodeIdSeed++;\n    this.text = null;\n    this.checked = false;\n    this.indeterminate = false;\n    this.data = null;\n    this.expanded = false;\n    this.parent = null;\n    this.visible = true;\n    this.isCurrent = false;\n    this.canFocus = false;\n    for (const name in options) {\n      if (hasOwn(options, name)) {\n        this[name] = options[name];\n      }\n    }\n    this.level = 0;\n    this.loaded = false;\n    this.childNodes = [];\n    this.loading = false;\n    if (this.parent) {\n      this.level = this.parent.level + 1;\n    }\n  }\n  initialize() {\n    const store = this.store;\n    if (!store) {\n      throw new Error(\"[Node]store is required!\");\n    }\n    store.registerNode(this);\n    const props = store.props;\n    if (props && typeof props.isLeaf !== \"undefined\") {\n      const isLeaf = getPropertyFromData(this, \"isLeaf\");\n      if (typeof isLeaf === \"boolean\") {\n        this.isLeafByUser = isLeaf;\n      }\n    }\n    if (store.lazy !== true && this.data) {\n      this.setData(this.data);\n      if (store.defaultExpandAll) {\n        this.expanded = true;\n        this.canFocus = true;\n      }\n    } else if (this.level > 0 && store.lazy && store.defaultExpandAll) {\n      this.expand();\n    }\n    if (!Array.isArray(this.data)) {\n      markNodeData(this, this.data);\n    }\n    if (!this.data)\n      return;\n    const defaultExpandedKeys = store.defaultExpandedKeys;\n    const key = store.key;\n    if (key && defaultExpandedKeys && defaultExpandedKeys.indexOf(this.key) !== -1) {\n      this.expand(null, store.autoExpandParent);\n    }\n    if (key && store.currentNodeKey !== void 0 && this.key === store.currentNodeKey) {\n      store.currentNode = this;\n      store.currentNode.isCurrent = true;\n    }\n    if (store.lazy) {\n      store._initDefaultCheckedNode(this);\n    }\n    this.updateLeafState();\n    if (this.parent && (this.level === 1 || this.parent.expanded === true))\n      this.canFocus = true;\n  }\n  setData(data) {\n    if (!Array.isArray(data)) {\n      markNodeData(this, data);\n    }\n    this.data = data;\n    this.childNodes = [];\n    let children;\n    if (this.level === 0 && this.data instanceof Array) {\n      children = this.data;\n    } else {\n      children = getPropertyFromData(this, \"children\") || [];\n    }\n    for (let i = 0, j = children.length; i < j; i++) {\n      this.insertChild({ data: children[i] });\n    }\n  }\n  get label() {\n    return getPropertyFromData(this, \"label\");\n  }\n  get key() {\n    const nodeKey = this.store.key;\n    if (this.data)\n      return this.data[nodeKey];\n    return null;\n  }\n  get disabled() {\n    return getPropertyFromData(this, \"disabled\");\n  }\n  get nextSibling() {\n    const parent = this.parent;\n    if (parent) {\n      const index = parent.childNodes.indexOf(this);\n      if (index > -1) {\n        return parent.childNodes[index + 1];\n      }\n    }\n    return null;\n  }\n  get previousSibling() {\n    const parent = this.parent;\n    if (parent) {\n      const index = parent.childNodes.indexOf(this);\n      if (index > -1) {\n        return index > 0 ? parent.childNodes[index - 1] : null;\n      }\n    }\n    return null;\n  }\n  contains(target, deep = true) {\n    return (this.childNodes || []).some((child) => child === target || deep && child.contains(target));\n  }\n  remove() {\n    const parent = this.parent;\n    if (parent) {\n      parent.removeChild(this);\n    }\n  }\n  insertChild(child, index, batch) {\n    if (!child)\n      throw new Error(\"InsertChild error: child is required.\");\n    if (!(child instanceof Node)) {\n      if (!batch) {\n        const children = this.getChildren(true);\n        if (children.indexOf(child.data) === -1) {\n          if (typeof index === \"undefined\" || index < 0) {\n            children.push(child.data);\n          } else {\n            children.splice(index, 0, child.data);\n          }\n        }\n      }\n      Object.assign(child, {\n        parent: this,\n        store: this.store\n      });\n      child = reactive(new Node(child));\n      if (child instanceof Node) {\n        child.initialize();\n      }\n    }\n    child.level = this.level + 1;\n    if (typeof index === \"undefined\" || index < 0) {\n      this.childNodes.push(child);\n    } else {\n      this.childNodes.splice(index, 0, child);\n    }\n    this.updateLeafState();\n  }\n  insertBefore(child, ref) {\n    let index;\n    if (ref) {\n      index = this.childNodes.indexOf(ref);\n    }\n    this.insertChild(child, index);\n  }\n  insertAfter(child, ref) {\n    let index;\n    if (ref) {\n      index = this.childNodes.indexOf(ref);\n      if (index !== -1)\n        index += 1;\n    }\n    this.insertChild(child, index);\n  }\n  removeChild(child) {\n    const children = this.getChildren() || [];\n    const dataIndex = children.indexOf(child.data);\n    if (dataIndex > -1) {\n      children.splice(dataIndex, 1);\n    }\n    const index = this.childNodes.indexOf(child);\n    if (index > -1) {\n      this.store && this.store.deregisterNode(child);\n      child.parent = null;\n      this.childNodes.splice(index, 1);\n    }\n    this.updateLeafState();\n  }\n  removeChildByData(data) {\n    let targetNode = null;\n    for (let i = 0; i < this.childNodes.length; i++) {\n      if (this.childNodes[i].data === data) {\n        targetNode = this.childNodes[i];\n        break;\n      }\n    }\n    if (targetNode) {\n      this.removeChild(targetNode);\n    }\n  }\n  expand(callback, expandParent) {\n    const done = () => {\n      if (expandParent) {\n        let parent = this.parent;\n        while (parent.level > 0) {\n          parent.expanded = true;\n          parent = parent.parent;\n        }\n      }\n      this.expanded = true;\n      if (callback)\n        callback();\n      this.childNodes.forEach((item) => {\n        item.canFocus = true;\n      });\n    };\n    if (this.shouldLoadData()) {\n      this.loadData((data) => {\n        if (Array.isArray(data)) {\n          if (this.checked) {\n            this.setChecked(true, true);\n          } else if (!this.store.checkStrictly) {\n            reInitChecked(this);\n          }\n          done();\n        }\n      });\n    } else {\n      done();\n    }\n  }\n  doCreateChildren(array, defaultProps = {}) {\n    array.forEach((item) => {\n      this.insertChild(Object.assign({ data: item }, defaultProps), void 0, true);\n    });\n  }\n  collapse() {\n    this.expanded = false;\n    this.childNodes.forEach((item) => {\n      item.canFocus = false;\n    });\n  }\n  shouldLoadData() {\n    return this.store.lazy === true && this.store.load && !this.loaded;\n  }\n  updateLeafState() {\n    if (this.store.lazy === true && this.loaded !== true && typeof this.isLeafByUser !== \"undefined\") {\n      this.isLeaf = this.isLeafByUser;\n      return;\n    }\n    const childNodes = this.childNodes;\n    if (!this.store.lazy || this.store.lazy === true && this.loaded === true) {\n      this.isLeaf = !childNodes || childNodes.length === 0;\n      return;\n    }\n    this.isLeaf = false;\n  }\n  setChecked(value, deep, recursion, passValue) {\n    this.indeterminate = value === \"half\";\n    this.checked = value === true;\n    if (this.store.checkStrictly)\n      return;\n    if (!(this.shouldLoadData() && !this.store.checkDescendants)) {\n      const { all, allWithoutDisable } = getChildState(this.childNodes);\n      if (!this.isLeaf && !all && allWithoutDisable) {\n        this.checked = false;\n        value = false;\n      }\n      const handleDescendants = () => {\n        if (deep) {\n          const childNodes = this.childNodes;\n          for (let i = 0, j = childNodes.length; i < j; i++) {\n            const child = childNodes[i];\n            passValue = passValue || value !== false;\n            const isCheck = child.disabled ? child.checked : passValue;\n            child.setChecked(isCheck, deep, true, passValue);\n          }\n          const { half, all: all2 } = getChildState(childNodes);\n          if (!all2) {\n            this.checked = all2;\n            this.indeterminate = half;\n          }\n        }\n      };\n      if (this.shouldLoadData()) {\n        this.loadData(() => {\n          handleDescendants();\n          reInitChecked(this);\n        }, {\n          checked: value !== false\n        });\n        return;\n      } else {\n        handleDescendants();\n      }\n    }\n    const parent = this.parent;\n    if (!parent || parent.level === 0)\n      return;\n    if (!recursion) {\n      reInitChecked(parent);\n    }\n  }\n  getChildren(forceInit = false) {\n    if (this.level === 0)\n      return this.data;\n    const data = this.data;\n    if (!data)\n      return null;\n    const props = this.store.props;\n    let children = \"children\";\n    if (props) {\n      children = props.children || \"children\";\n    }\n    if (data[children] === void 0) {\n      data[children] = null;\n    }\n    if (forceInit && !data[children]) {\n      data[children] = [];\n    }\n    return data[children];\n  }\n  updateChildren() {\n    const newData = this.getChildren() || [];\n    const oldData = this.childNodes.map((node) => node.data);\n    const newDataMap = {};\n    const newNodes = [];\n    newData.forEach((item, index) => {\n      const key = item[NODE_KEY];\n      const isNodeExists = !!key && oldData.findIndex((data) => data[NODE_KEY] === key) >= 0;\n      if (isNodeExists) {\n        newDataMap[key] = { index, data: item };\n      } else {\n        newNodes.push({ index, data: item });\n      }\n    });\n    if (!this.store.lazy) {\n      oldData.forEach((item) => {\n        if (!newDataMap[item[NODE_KEY]])\n          this.removeChildByData(item);\n      });\n    }\n    newNodes.forEach(({ index, data }) => {\n      this.insertChild({ data }, index);\n    });\n    this.updateLeafState();\n  }\n  loadData(callback, defaultProps = {}) {\n    if (this.store.lazy === true && this.store.load && !this.loaded && (!this.loading || Object.keys(defaultProps).length)) {\n      this.loading = true;\n      const resolve = (children) => {\n        this.loaded = true;\n        this.loading = false;\n        this.childNodes = [];\n        this.doCreateChildren(children, defaultProps);\n        this.updateLeafState();\n        if (callback) {\n          callback.call(this, children);\n        }\n      };\n      this.store.load(this, resolve);\n    } else {\n      if (callback) {\n        callback.call(this);\n      }\n    }\n  }\n}\nvar Node$1 = Node;\n\nclass TreeStore {\n  constructor(options) {\n    this.currentNode = null;\n    this.currentNodeKey = null;\n    for (const option in options) {\n      if (hasOwn(options, option)) {\n        this[option] = options[option];\n      }\n    }\n    this.nodesMap = {};\n  }\n  initialize() {\n    this.root = new Node$1({\n      data: this.data,\n      store: this\n    });\n    this.root.initialize();\n    if (this.lazy && this.load) {\n      const loadFn = this.load;\n      loadFn(this.root, (data) => {\n        this.root.doCreateChildren(data);\n        this._initDefaultCheckedNodes();\n      });\n    } else {\n      this._initDefaultCheckedNodes();\n    }\n  }\n  filter(value) {\n    const filterNodeMethod = this.filterNodeMethod;\n    const lazy = this.lazy;\n    const traverse = function(node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes;\n      childNodes.forEach((child) => {\n        child.visible = filterNodeMethod.call(child, value, child.data, child);\n        traverse(child);\n      });\n      if (!node.visible && childNodes.length) {\n        let allHidden = true;\n        allHidden = !childNodes.some((child) => child.visible);\n        if (node.root) {\n          node.root.visible = allHidden === false;\n        } else {\n          node.visible = allHidden === false;\n        }\n      }\n      if (!value)\n        return;\n      if (node.visible && !node.isLeaf && !lazy)\n        node.expand();\n    };\n    traverse(this);\n  }\n  setData(newVal) {\n    const instanceChanged = newVal !== this.root.data;\n    if (instanceChanged) {\n      this.root.setData(newVal);\n      this._initDefaultCheckedNodes();\n    } else {\n      this.root.updateChildren();\n    }\n  }\n  getNode(data) {\n    if (data instanceof Node$1)\n      return data;\n    const key = typeof data !== \"object\" ? data : getNodeKey(this.key, data);\n    return this.nodesMap[key] || null;\n  }\n  insertBefore(data, refData) {\n    const refNode = this.getNode(refData);\n    refNode.parent.insertBefore({ data }, refNode);\n  }\n  insertAfter(data, refData) {\n    const refNode = this.getNode(refData);\n    refNode.parent.insertAfter({ data }, refNode);\n  }\n  remove(data) {\n    const node = this.getNode(data);\n    if (node && node.parent) {\n      if (node === this.currentNode) {\n        this.currentNode = null;\n      }\n      node.parent.removeChild(node);\n    }\n  }\n  append(data, parentData) {\n    const parentNode = parentData ? this.getNode(parentData) : this.root;\n    if (parentNode) {\n      parentNode.insertChild({ data });\n    }\n  }\n  _initDefaultCheckedNodes() {\n    const defaultCheckedKeys = this.defaultCheckedKeys || [];\n    const nodesMap = this.nodesMap;\n    defaultCheckedKeys.forEach((checkedKey) => {\n      const node = nodesMap[checkedKey];\n      if (node) {\n        node.setChecked(true, !this.checkStrictly);\n      }\n    });\n  }\n  _initDefaultCheckedNode(node) {\n    const defaultCheckedKeys = this.defaultCheckedKeys || [];\n    if (defaultCheckedKeys.indexOf(node.key) !== -1) {\n      node.setChecked(true, !this.checkStrictly);\n    }\n  }\n  setDefaultCheckedKey(newVal) {\n    if (newVal !== this.defaultCheckedKeys) {\n      this.defaultCheckedKeys = newVal;\n      this._initDefaultCheckedNodes();\n    }\n  }\n  registerNode(node) {\n    const key = this.key;\n    if (!node || !node.data)\n      return;\n    if (!key) {\n      this.nodesMap[node.id] = node;\n    } else {\n      const nodeKey = node.key;\n      if (nodeKey !== void 0)\n        this.nodesMap[node.key] = node;\n    }\n  }\n  deregisterNode(node) {\n    const key = this.key;\n    if (!key || !node || !node.data)\n      return;\n    node.childNodes.forEach((child) => {\n      this.deregisterNode(child);\n    });\n    delete this.nodesMap[node.key];\n  }\n  getCheckedNodes(leafOnly = false, includeHalfChecked = false) {\n    const checkedNodes = [];\n    const traverse = function(node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes;\n      childNodes.forEach((child) => {\n        if ((child.checked || includeHalfChecked && child.indeterminate) && (!leafOnly || leafOnly && child.isLeaf)) {\n          checkedNodes.push(child.data);\n        }\n        traverse(child);\n      });\n    };\n    traverse(this);\n    return checkedNodes;\n  }\n  getCheckedKeys(leafOnly = false) {\n    return this.getCheckedNodes(leafOnly).map((data) => (data || {})[this.key]);\n  }\n  getHalfCheckedNodes() {\n    const nodes = [];\n    const traverse = function(node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes;\n      childNodes.forEach((child) => {\n        if (child.indeterminate) {\n          nodes.push(child.data);\n        }\n        traverse(child);\n      });\n    };\n    traverse(this);\n    return nodes;\n  }\n  getHalfCheckedKeys() {\n    return this.getHalfCheckedNodes().map((data) => (data || {})[this.key]);\n  }\n  _getAllNodes() {\n    const allNodes = [];\n    const nodesMap = this.nodesMap;\n    for (const nodeKey in nodesMap) {\n      if (hasOwn(nodesMap, nodeKey)) {\n        allNodes.push(nodesMap[nodeKey]);\n      }\n    }\n    return allNodes;\n  }\n  updateChildren(key, data) {\n    const node = this.nodesMap[key];\n    if (!node)\n      return;\n    const childNodes = node.childNodes;\n    for (let i = childNodes.length - 1; i >= 0; i--) {\n      const child = childNodes[i];\n      this.remove(child.data);\n    }\n    for (let i = 0, j = data.length; i < j; i++) {\n      const child = data[i];\n      this.append(child, node.data);\n    }\n  }\n  _setCheckedKeys(key, leafOnly = false, checkedKeys) {\n    const allNodes = this._getAllNodes().sort((a, b) => b.level - a.level);\n    const cache = Object.create(null);\n    const keys = Object.keys(checkedKeys);\n    allNodes.forEach((node) => node.setChecked(false, false));\n    for (let i = 0, j = allNodes.length; i < j; i++) {\n      const node = allNodes[i];\n      const nodeKey = node.data[key].toString();\n      const checked = keys.indexOf(nodeKey) > -1;\n      if (!checked) {\n        if (node.checked && !cache[nodeKey]) {\n          node.setChecked(false, false);\n        }\n        continue;\n      }\n      let parent = node.parent;\n      while (parent && parent.level > 0) {\n        cache[parent.data[key]] = true;\n        parent = parent.parent;\n      }\n      if (node.isLeaf || this.checkStrictly) {\n        node.setChecked(true, false);\n        continue;\n      }\n      node.setChecked(true, true);\n      if (leafOnly) {\n        node.setChecked(false, false);\n        const traverse = function(node2) {\n          const childNodes = node2.childNodes;\n          childNodes.forEach((child) => {\n            if (!child.isLeaf) {\n              child.setChecked(false, false);\n            }\n            traverse(child);\n          });\n        };\n        traverse(node);\n      }\n    }\n  }\n  setCheckedNodes(array, leafOnly = false) {\n    const key = this.key;\n    const checkedKeys = {};\n    array.forEach((item) => {\n      checkedKeys[(item || {})[key]] = true;\n    });\n    this._setCheckedKeys(key, leafOnly, checkedKeys);\n  }\n  setCheckedKeys(keys, leafOnly = false) {\n    this.defaultCheckedKeys = keys;\n    const key = this.key;\n    const checkedKeys = {};\n    keys.forEach((key2) => {\n      checkedKeys[key2] = true;\n    });\n    this._setCheckedKeys(key, leafOnly, checkedKeys);\n  }\n  setDefaultExpandedKeys(keys) {\n    keys = keys || [];\n    this.defaultExpandedKeys = keys;\n    keys.forEach((key) => {\n      const node = this.getNode(key);\n      if (node)\n        node.expand(null, this.autoExpandParent);\n    });\n  }\n  setChecked(data, checked, deep) {\n    const node = this.getNode(data);\n    if (node) {\n      node.setChecked(!!checked, deep);\n    }\n  }\n  getCurrentNode() {\n    return this.currentNode;\n  }\n  setCurrentNode(currentNode) {\n    const prevCurrentNode = this.currentNode;\n    if (prevCurrentNode) {\n      prevCurrentNode.isCurrent = false;\n    }\n    this.currentNode = currentNode;\n    this.currentNode.isCurrent = true;\n  }\n  setUserCurrentNode(node, shouldAutoExpandParent = true) {\n    const key = node[this.key];\n    const currNode = this.nodesMap[key];\n    this.setCurrentNode(currNode);\n    if (shouldAutoExpandParent && this.currentNode.level > 1) {\n      this.currentNode.parent.expand(null, true);\n    }\n  }\n  setCurrentNodeKey(key, shouldAutoExpandParent = true) {\n    if (key === null || key === void 0) {\n      this.currentNode && (this.currentNode.isCurrent = false);\n      this.currentNode = null;\n      return;\n    }\n    const node = this.getNode(key);\n    if (node) {\n      this.setCurrentNode(node);\n      if (shouldAutoExpandParent && this.currentNode.level > 1) {\n        this.currentNode.parent.expand(null, true);\n      }\n    }\n  }\n}\n\nvar script$2 = defineComponent({\n  name: \"ElTreeNodeContent\",\n  props: {\n    node: {\n      type: Object,\n      required: true\n    },\n    renderContent: Function\n  },\n  setup(props) {\n    const nodeInstance = inject(\"NodeInstance\");\n    const tree = inject(\"RootTree\");\n    return () => {\n      const node = props.node;\n      const { data, store } = node;\n      return props.renderContent ? props.renderContent(h, { _self: nodeInstance, node, data, store }) : tree.ctx.slots.default ? tree.ctx.slots.default({ node, data }) : h(\"span\", { class: \"el-tree-node__label\" }, [node.label]);\n    };\n  }\n});\n\nscript$2.__file = \"packages/components/tree/src/tree-node-content.vue\";\n\nfunction useNodeExpandEventBroadcast(props) {\n  const parentNodeMap = inject(\"TreeNodeMap\", null);\n  const currentNodeMap = {\n    treeNodeExpand: (node) => {\n      if (props.node !== node) {\n        props.node.collapse();\n      }\n    },\n    children: []\n  };\n  if (parentNodeMap) {\n    parentNodeMap.children.push(currentNodeMap);\n  }\n  provide(\"TreeNodeMap\", currentNodeMap);\n  return {\n    broadcastExpanded: (node) => {\n      if (!props.accordion)\n        return;\n      for (const childNode of currentNodeMap.children) {\n        childNode.treeNodeExpand(node);\n      }\n    }\n  };\n}\n\nconst dragEventsKey = Symbol(\"dragEvents\");\nfunction useDragNodeHandler({ props, ctx, el$, dropIndicator$, store }) {\n  const dragState = ref({\n    showDropIndicator: false,\n    draggingNode: null,\n    dropNode: null,\n    allowDrop: true,\n    dropType: null\n  });\n  const treeNodeDragStart = ({ event, treeNode }) => {\n    if (typeof props.allowDrag === \"function\" && !props.allowDrag(treeNode.node)) {\n      event.preventDefault();\n      return false;\n    }\n    event.dataTransfer.effectAllowed = \"move\";\n    try {\n      event.dataTransfer.setData(\"text/plain\", \"\");\n    } catch (e) {\n    }\n    dragState.value.draggingNode = treeNode;\n    ctx.emit(\"node-drag-start\", treeNode.node, event);\n  };\n  const treeNodeDragOver = ({ event, treeNode }) => {\n    const dropNode = treeNode;\n    const oldDropNode = dragState.value.dropNode;\n    if (oldDropNode && oldDropNode !== dropNode) {\n      removeClass(oldDropNode.$el, \"is-drop-inner\");\n    }\n    const draggingNode = dragState.value.draggingNode;\n    if (!draggingNode || !dropNode)\n      return;\n    let dropPrev = true;\n    let dropInner = true;\n    let dropNext = true;\n    let userAllowDropInner = true;\n    if (typeof props.allowDrop === \"function\") {\n      dropPrev = props.allowDrop(draggingNode.node, dropNode.node, \"prev\");\n      userAllowDropInner = dropInner = props.allowDrop(draggingNode.node, dropNode.node, \"inner\");\n      dropNext = props.allowDrop(draggingNode.node, dropNode.node, \"next\");\n    }\n    event.dataTransfer.dropEffect = dropInner ? \"move\" : \"none\";\n    if ((dropPrev || dropInner || dropNext) && oldDropNode !== dropNode) {\n      if (oldDropNode) {\n        ctx.emit(\"node-drag-leave\", draggingNode.node, oldDropNode.node, event);\n      }\n      ctx.emit(\"node-drag-enter\", draggingNode.node, dropNode.node, event);\n    }\n    if (dropPrev || dropInner || dropNext) {\n      dragState.value.dropNode = dropNode;\n    }\n    if (dropNode.node.nextSibling === draggingNode.node) {\n      dropNext = false;\n    }\n    if (dropNode.node.previousSibling === draggingNode.node) {\n      dropPrev = false;\n    }\n    if (dropNode.node.contains(draggingNode.node, false)) {\n      dropInner = false;\n    }\n    if (draggingNode.node === dropNode.node || draggingNode.node.contains(dropNode.node)) {\n      dropPrev = false;\n      dropInner = false;\n      dropNext = false;\n    }\n    const targetPosition = dropNode.$el.getBoundingClientRect();\n    const treePosition = el$.value.getBoundingClientRect();\n    let dropType;\n    const prevPercent = dropPrev ? dropInner ? 0.25 : dropNext ? 0.45 : 1 : -1;\n    const nextPercent = dropNext ? dropInner ? 0.75 : dropPrev ? 0.55 : 0 : 1;\n    let indicatorTop = -9999;\n    const distance = event.clientY - targetPosition.top;\n    if (distance < targetPosition.height * prevPercent) {\n      dropType = \"before\";\n    } else if (distance > targetPosition.height * nextPercent) {\n      dropType = \"after\";\n    } else if (dropInner) {\n      dropType = \"inner\";\n    } else {\n      dropType = \"none\";\n    }\n    const iconPosition = dropNode.$el.querySelector(\".el-tree-node__expand-icon\").getBoundingClientRect();\n    const dropIndicator = dropIndicator$.value;\n    if (dropType === \"before\") {\n      indicatorTop = iconPosition.top - treePosition.top;\n    } else if (dropType === \"after\") {\n      indicatorTop = iconPosition.bottom - treePosition.top;\n    }\n    dropIndicator.style.top = `${indicatorTop}px`;\n    dropIndicator.style.left = `${iconPosition.right - treePosition.left}px`;\n    if (dropType === \"inner\") {\n      addClass(dropNode.$el, \"is-drop-inner\");\n    } else {\n      removeClass(dropNode.$el, \"is-drop-inner\");\n    }\n    dragState.value.showDropIndicator = dropType === \"before\" || dropType === \"after\";\n    dragState.value.allowDrop = dragState.value.showDropIndicator || userAllowDropInner;\n    dragState.value.dropType = dropType;\n    ctx.emit(\"node-drag-over\", draggingNode.node, dropNode.node, event);\n  };\n  const treeNodeDragEnd = (event) => {\n    const { draggingNode, dropType, dropNode } = dragState.value;\n    event.preventDefault();\n    event.dataTransfer.dropEffect = \"move\";\n    if (draggingNode && dropNode) {\n      const draggingNodeCopy = { data: draggingNode.node.data };\n      if (dropType !== \"none\") {\n        draggingNode.node.remove();\n      }\n      if (dropType === \"before\") {\n        dropNode.node.parent.insertBefore(draggingNodeCopy, dropNode.node);\n      } else if (dropType === \"after\") {\n        dropNode.node.parent.insertAfter(draggingNodeCopy, dropNode.node);\n      } else if (dropType === \"inner\") {\n        dropNode.node.insertChild(draggingNodeCopy);\n      }\n      if (dropType !== \"none\") {\n        store.value.registerNode(draggingNodeCopy);\n      }\n      removeClass(dropNode.$el, \"is-drop-inner\");\n      ctx.emit(\"node-drag-end\", draggingNode.node, dropNode.node, dropType, event);\n      if (dropType !== \"none\") {\n        ctx.emit(\"node-drop\", draggingNode.node, dropNode.node, dropType, event);\n      }\n    }\n    if (draggingNode && !dropNode) {\n      ctx.emit(\"node-drag-end\", draggingNode.node, null, dropType, event);\n    }\n    dragState.value.showDropIndicator = false;\n    dragState.value.draggingNode = null;\n    dragState.value.dropNode = null;\n    dragState.value.allowDrop = true;\n  };\n  provide(dragEventsKey, {\n    treeNodeDragStart,\n    treeNodeDragOver,\n    treeNodeDragEnd\n  });\n  return {\n    dragState\n  };\n}\n\nvar script$1 = defineComponent({\n  name: \"ElTreeNode\",\n  components: {\n    ElCollapseTransition,\n    ElCheckbox,\n    NodeContent: script$2\n  },\n  props: {\n    node: {\n      type: Node$1,\n      default: () => ({})\n    },\n    props: {\n      type: Object,\n      default: () => ({})\n    },\n    accordion: Boolean,\n    renderContent: Function,\n    renderAfterExpand: Boolean,\n    showCheckbox: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"node-expand\"],\n  setup(props, ctx) {\n    const { broadcastExpanded } = useNodeExpandEventBroadcast(props);\n    const tree = inject(\"RootTree\");\n    const expanded = ref(false);\n    const childNodeRendered = ref(false);\n    const oldChecked = ref(null);\n    const oldIndeterminate = ref(null);\n    const node$ = ref(null);\n    const dragEvents = inject(dragEventsKey);\n    const instance = getCurrentInstance();\n    provide(\"NodeInstance\", instance);\n    if (!tree) {\n      debugWarn(\"Tree\", \"Can not find node's tree.\");\n    }\n    if (props.node.expanded) {\n      expanded.value = true;\n      childNodeRendered.value = true;\n    }\n    const childrenKey = tree.props[\"children\"] || \"children\";\n    watch(() => {\n      const children = props.node.data[childrenKey];\n      return children && [...children];\n    }, () => {\n      props.node.updateChildren();\n    });\n    watch(() => props.node.indeterminate, (val) => {\n      handleSelectChange(props.node.checked, val);\n    });\n    watch(() => props.node.checked, (val) => {\n      handleSelectChange(val, props.node.indeterminate);\n    });\n    watch(() => props.node.expanded, (val) => {\n      nextTick(() => expanded.value = val);\n      if (val) {\n        childNodeRendered.value = true;\n      }\n    });\n    const getNodeKey$1 = (node) => {\n      return getNodeKey(tree.props.nodeKey, node.data);\n    };\n    const handleSelectChange = (checked, indeterminate) => {\n      if (oldChecked.value !== checked || oldIndeterminate.value !== indeterminate) {\n        tree.ctx.emit(\"check-change\", props.node.data, checked, indeterminate);\n      }\n      oldChecked.value = checked;\n      oldIndeterminate.value = indeterminate;\n    };\n    const handleClick = () => {\n      const store = tree.store.value;\n      store.setCurrentNode(props.node);\n      tree.ctx.emit(\"current-change\", store.currentNode ? store.currentNode.data : null, store.currentNode);\n      tree.currentNode.value = props.node;\n      if (tree.props.expandOnClickNode) {\n        handleExpandIconClick();\n      }\n      if (tree.props.checkOnClickNode && !props.node.disabled) {\n        handleCheckChange(null, {\n          target: { checked: !props.node.checked }\n        });\n      }\n      tree.ctx.emit(\"node-click\", props.node.data, props.node, instance);\n    };\n    const handleContextMenu = (event) => {\n      if (tree.instance.vnode.props[\"onNodeContextmenu\"]) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n      tree.ctx.emit(\"node-contextmenu\", event, props.node.data, props.node, instance);\n    };\n    const handleExpandIconClick = () => {\n      if (props.node.isLeaf)\n        return;\n      if (expanded.value) {\n        tree.ctx.emit(\"node-collapse\", props.node.data, props.node, instance);\n        props.node.collapse();\n      } else {\n        props.node.expand();\n        ctx.emit(\"node-expand\", props.node.data, props.node, instance);\n      }\n    };\n    const handleCheckChange = (value, ev) => {\n      props.node.setChecked(ev.target.checked, !tree.props.checkStrictly);\n      nextTick(() => {\n        const store = tree.store.value;\n        tree.ctx.emit(\"check\", props.node.data, {\n          checkedNodes: store.getCheckedNodes(),\n          checkedKeys: store.getCheckedKeys(),\n          halfCheckedNodes: store.getHalfCheckedNodes(),\n          halfCheckedKeys: store.getHalfCheckedKeys()\n        });\n      });\n    };\n    const handleChildNodeExpand = (nodeData, node, instance2) => {\n      broadcastExpanded(node);\n      tree.ctx.emit(\"node-expand\", nodeData, node, instance2);\n    };\n    const handleDragStart = (event) => {\n      if (!tree.props.draggable)\n        return;\n      dragEvents.treeNodeDragStart({ event, treeNode: props });\n    };\n    const handleDragOver = (event) => {\n      if (!tree.props.draggable)\n        return;\n      dragEvents.treeNodeDragOver({\n        event,\n        treeNode: { $el: node$.value, node: props.node }\n      });\n      event.preventDefault();\n    };\n    const handleDrop = (event) => {\n      event.preventDefault();\n    };\n    const handleDragEnd = (event) => {\n      if (!tree.props.draggable)\n        return;\n      dragEvents.treeNodeDragEnd(event);\n    };\n    return {\n      node$,\n      tree,\n      expanded,\n      childNodeRendered,\n      oldChecked,\n      oldIndeterminate,\n      getNodeKey: getNodeKey$1,\n      handleSelectChange,\n      handleClick,\n      handleContextMenu,\n      handleExpandIconClick,\n      handleCheckChange,\n      handleChildNodeExpand,\n      handleDragStart,\n      handleDragOver,\n      handleDrop,\n      handleDragEnd\n    };\n  }\n});\n\nconst _hoisted_1$1 = [\"aria-expanded\", \"aria-disabled\", \"aria-checked\", \"draggable\", \"data-key\"];\nconst _hoisted_2$1 = {\n  key: 1,\n  class: \"el-tree-node__loading-icon el-icon-loading\"\n};\nconst _hoisted_3$1 = [\"aria-expanded\"];\nfunction render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_checkbox = resolveComponent(\"el-checkbox\");\n  const _component_node_content = resolveComponent(\"node-content\");\n  const _component_el_tree_node = resolveComponent(\"el-tree-node\");\n  const _component_el_collapse_transition = resolveComponent(\"el-collapse-transition\");\n  return withDirectives((openBlock(), createElementBlock(\"div\", {\n    ref: \"node$\",\n    class: normalizeClass([\"el-tree-node\", {\n      \"is-expanded\": _ctx.expanded,\n      \"is-current\": _ctx.node.isCurrent,\n      \"is-hidden\": !_ctx.node.visible,\n      \"is-focusable\": !_ctx.node.disabled,\n      \"is-checked\": !_ctx.node.disabled && _ctx.node.checked\n    }]),\n    role: \"treeitem\",\n    tabindex: \"-1\",\n    \"aria-expanded\": _ctx.expanded,\n    \"aria-disabled\": _ctx.node.disabled,\n    \"aria-checked\": _ctx.node.checked,\n    draggable: _ctx.tree.props.draggable,\n    \"data-key\": _ctx.getNodeKey(_ctx.node),\n    onClick: _cache[2] || (_cache[2] = withModifiers((...args) => _ctx.handleClick && _ctx.handleClick(...args), [\"stop\"])),\n    onContextmenu: _cache[3] || (_cache[3] = (...args) => _ctx.handleContextMenu && _ctx.handleContextMenu(...args)),\n    onDragstart: _cache[4] || (_cache[4] = withModifiers((...args) => _ctx.handleDragStart && _ctx.handleDragStart(...args), [\"stop\"])),\n    onDragover: _cache[5] || (_cache[5] = withModifiers((...args) => _ctx.handleDragOver && _ctx.handleDragOver(...args), [\"stop\"])),\n    onDragend: _cache[6] || (_cache[6] = withModifiers((...args) => _ctx.handleDragEnd && _ctx.handleDragEnd(...args), [\"stop\"])),\n    onDrop: _cache[7] || (_cache[7] = withModifiers((...args) => _ctx.handleDrop && _ctx.handleDrop(...args), [\"stop\"]))\n  }, [\n    createElementVNode(\"div\", {\n      class: \"el-tree-node__content\",\n      style: normalizeStyle({ paddingLeft: (_ctx.node.level - 1) * _ctx.tree.props.indent + \"px\" })\n    }, [\n      createElementVNode(\"span\", {\n        class: normalizeClass([\n          {\n            \"is-leaf\": _ctx.node.isLeaf,\n            expanded: !_ctx.node.isLeaf && _ctx.expanded\n          },\n          \"el-tree-node__expand-icon\",\n          _ctx.tree.props.iconClass ? _ctx.tree.props.iconClass : \"el-icon-caret-right\"\n        ]),\n        onClick: _cache[0] || (_cache[0] = withModifiers((...args) => _ctx.handleExpandIconClick && _ctx.handleExpandIconClick(...args), [\"stop\"]))\n      }, null, 2),\n      _ctx.showCheckbox ? (openBlock(), createBlock(_component_el_checkbox, {\n        key: 0,\n        \"model-value\": _ctx.node.checked,\n        indeterminate: _ctx.node.indeterminate,\n        disabled: !!_ctx.node.disabled,\n        onClick: _cache[1] || (_cache[1] = withModifiers(() => {\n        }, [\"stop\"])),\n        onChange: _ctx.handleCheckChange\n      }, null, 8, [\"model-value\", \"indeterminate\", \"disabled\", \"onChange\"])) : createCommentVNode(\"v-if\", true),\n      _ctx.node.loading ? (openBlock(), createElementBlock(\"span\", _hoisted_2$1)) : createCommentVNode(\"v-if\", true),\n      createVNode(_component_node_content, {\n        node: _ctx.node,\n        \"render-content\": _ctx.renderContent\n      }, null, 8, [\"node\", \"render-content\"])\n    ], 4),\n    createVNode(_component_el_collapse_transition, null, {\n      default: withCtx(() => [\n        !_ctx.renderAfterExpand || _ctx.childNodeRendered ? withDirectives((openBlock(), createElementBlock(\"div\", {\n          key: 0,\n          class: \"el-tree-node__children\",\n          role: \"group\",\n          \"aria-expanded\": _ctx.expanded\n        }, [\n          (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.node.childNodes, (child) => {\n            return openBlock(), createBlock(_component_el_tree_node, {\n              key: _ctx.getNodeKey(child),\n              \"render-content\": _ctx.renderContent,\n              \"render-after-expand\": _ctx.renderAfterExpand,\n              \"show-checkbox\": _ctx.showCheckbox,\n              node: child,\n              onNodeExpand: _ctx.handleChildNodeExpand\n            }, null, 8, [\"render-content\", \"render-after-expand\", \"show-checkbox\", \"node\", \"onNodeExpand\"]);\n          }), 128))\n        ], 8, _hoisted_3$1)), [\n          [vShow, _ctx.expanded]\n        ]) : createCommentVNode(\"v-if\", true)\n      ]),\n      _: 1\n    })\n  ], 42, _hoisted_1$1)), [\n    [vShow, _ctx.node.visible]\n  ]);\n}\n\nscript$1.render = render$1;\nscript$1.__file = \"packages/components/tree/src/tree-node.vue\";\n\nfunction useKeydown({ el$ }, store) {\n  const treeItems = shallowRef([]);\n  const checkboxItems = shallowRef([]);\n  onMounted(() => {\n    initTabIndex();\n    on(el$.value, \"keydown\", handleKeydown);\n  });\n  onBeforeUnmount(() => {\n    off(el$.value, \"keydown\", handleKeydown);\n  });\n  onUpdated(() => {\n    treeItems.value = Array.from(el$.value.querySelectorAll(\"[role=treeitem]\"));\n    checkboxItems.value = Array.from(el$.value.querySelectorAll(\"input[type=checkbox]\"));\n  });\n  watch(checkboxItems, (val) => {\n    val.forEach((checkbox) => {\n      checkbox.setAttribute(\"tabindex\", \"-1\");\n    });\n  });\n  const handleKeydown = (ev) => {\n    const currentItem = ev.target;\n    if (currentItem.className.indexOf(\"el-tree-node\") === -1)\n      return;\n    const code = ev.code;\n    treeItems.value = Array.from(el$.value.querySelectorAll(\".is-focusable[role=treeitem]\"));\n    const currentIndex = treeItems.value.indexOf(currentItem);\n    let nextIndex;\n    if ([EVENT_CODE.up, EVENT_CODE.down].indexOf(code) > -1) {\n      ev.preventDefault();\n      if (code === EVENT_CODE.up) {\n        nextIndex = currentIndex === -1 ? 0 : currentIndex !== 0 ? currentIndex - 1 : treeItems.value.length - 1;\n        const startIndex = nextIndex;\n        while (true) {\n          if (store.value.getNode(treeItems.value[nextIndex].dataset.key).canFocus)\n            break;\n          nextIndex--;\n          if (nextIndex === startIndex) {\n            nextIndex = -1;\n            break;\n          }\n          if (nextIndex < 0) {\n            nextIndex = treeItems.value.length - 1;\n          }\n        }\n      } else {\n        nextIndex = currentIndex === -1 ? 0 : currentIndex < treeItems.value.length - 1 ? currentIndex + 1 : 0;\n        const startIndex = nextIndex;\n        while (true) {\n          if (store.value.getNode(treeItems.value[nextIndex].dataset.key).canFocus)\n            break;\n          nextIndex++;\n          if (nextIndex === startIndex) {\n            nextIndex = -1;\n            break;\n          }\n          if (nextIndex >= treeItems.value.length) {\n            nextIndex = 0;\n          }\n        }\n      }\n      nextIndex !== -1 && treeItems.value[nextIndex].focus();\n    }\n    if ([EVENT_CODE.left, EVENT_CODE.right].indexOf(code) > -1) {\n      ev.preventDefault();\n      currentItem.click();\n    }\n    const hasInput = currentItem.querySelector('[type=\"checkbox\"]');\n    if ([EVENT_CODE.enter, EVENT_CODE.space].indexOf(code) > -1 && hasInput) {\n      ev.preventDefault();\n      hasInput.click();\n    }\n  };\n  const initTabIndex = () => {\n    var _a;\n    treeItems.value = Array.from(el$.value.querySelectorAll(\".is-focusable[role=treeitem]\"));\n    checkboxItems.value = Array.from(el$.value.querySelectorAll(\"input[type=checkbox]\"));\n    const checkedItem = el$.value.querySelectorAll(\".is-checked[role=treeitem]\");\n    if (checkedItem.length) {\n      checkedItem[0].setAttribute(\"tabindex\", \"0\");\n      return;\n    }\n    (_a = treeItems.value[0]) == null ? void 0 : _a.setAttribute(\"tabindex\", \"0\");\n  };\n}\n\nvar script = defineComponent({\n  name: \"ElTree\",\n  components: { ElTreeNode: script$1 },\n  props: {\n    data: {\n      type: Array,\n      default: () => []\n    },\n    emptyText: {\n      type: String\n    },\n    renderAfterExpand: {\n      type: Boolean,\n      default: true\n    },\n    nodeKey: String,\n    checkStrictly: Boolean,\n    defaultExpandAll: Boolean,\n    expandOnClickNode: {\n      type: Boolean,\n      default: true\n    },\n    checkOnClickNode: Boolean,\n    checkDescendants: {\n      type: Boolean,\n      default: false\n    },\n    autoExpandParent: {\n      type: Boolean,\n      default: true\n    },\n    defaultCheckedKeys: Array,\n    defaultExpandedKeys: Array,\n    currentNodeKey: [String, Number],\n    renderContent: Function,\n    showCheckbox: {\n      type: Boolean,\n      default: false\n    },\n    draggable: {\n      type: Boolean,\n      default: false\n    },\n    allowDrag: Function,\n    allowDrop: Function,\n    props: {\n      type: Object,\n      default: () => ({\n        children: \"children\",\n        label: \"label\",\n        disabled: \"disabled\"\n      })\n    },\n    lazy: {\n      type: Boolean,\n      default: false\n    },\n    highlightCurrent: Boolean,\n    load: Function,\n    filterNodeMethod: Function,\n    accordion: Boolean,\n    indent: {\n      type: Number,\n      default: 18\n    },\n    iconClass: String\n  },\n  emits: [\n    \"check-change\",\n    \"current-change\",\n    \"node-click\",\n    \"node-contextmenu\",\n    \"node-collapse\",\n    \"node-expand\",\n    \"check\",\n    \"node-drag-start\",\n    \"node-drag-end\",\n    \"node-drop\",\n    \"node-drag-leave\",\n    \"node-drag-enter\",\n    \"node-drag-over\"\n  ],\n  setup(props, ctx) {\n    const { t } = useLocaleInject();\n    const store = ref(new TreeStore({\n      key: props.nodeKey,\n      data: props.data,\n      lazy: props.lazy,\n      props: props.props,\n      load: props.load,\n      currentNodeKey: props.currentNodeKey,\n      checkStrictly: props.checkStrictly,\n      checkDescendants: props.checkDescendants,\n      defaultCheckedKeys: props.defaultCheckedKeys,\n      defaultExpandedKeys: props.defaultExpandedKeys,\n      autoExpandParent: props.autoExpandParent,\n      defaultExpandAll: props.defaultExpandAll,\n      filterNodeMethod: props.filterNodeMethod\n    }));\n    store.value.initialize();\n    const root = ref(store.value.root);\n    const currentNode = ref(null);\n    const el$ = ref(null);\n    const dropIndicator$ = ref(null);\n    const { broadcastExpanded } = useNodeExpandEventBroadcast(props);\n    const { dragState } = useDragNodeHandler({\n      props,\n      ctx,\n      el$,\n      dropIndicator$,\n      store\n    });\n    useKeydown({ el$ }, store);\n    const isEmpty = computed(() => {\n      const { childNodes } = root.value;\n      return !childNodes || childNodes.length === 0 || childNodes.every(({ visible }) => !visible);\n    });\n    watch(() => props.defaultCheckedKeys, (newVal) => {\n      store.value.setDefaultCheckedKey(newVal);\n    });\n    watch(() => props.defaultExpandedKeys, (newVal) => {\n      store.value.defaultExpandedKeys = newVal;\n      store.value.setDefaultExpandedKeys(newVal);\n    });\n    watch(() => props.data, (newVal) => {\n      store.value.setData(newVal);\n    }, { deep: true });\n    watch(() => props.checkStrictly, (newVal) => {\n      store.value.checkStrictly = newVal;\n    });\n    const filter = (value) => {\n      if (!props.filterNodeMethod)\n        throw new Error(\"[Tree] filterNodeMethod is required when filter\");\n      store.value.filter(value);\n    };\n    const getNodeKey$1 = (node) => {\n      return getNodeKey(props.nodeKey, node.data);\n    };\n    const getNodePath = (data) => {\n      if (!props.nodeKey)\n        throw new Error(\"[Tree] nodeKey is required in getNodePath\");\n      const node = store.value.getNode(data);\n      if (!node)\n        return [];\n      const path = [node.data];\n      let parent = node.parent;\n      while (parent && parent !== root.value) {\n        path.push(parent.data);\n        parent = parent.parent;\n      }\n      return path.reverse();\n    };\n    const getCheckedNodes = (leafOnly, includeHalfChecked) => {\n      return store.value.getCheckedNodes(leafOnly, includeHalfChecked);\n    };\n    const getCheckedKeys = (leafOnly) => {\n      return store.value.getCheckedKeys(leafOnly);\n    };\n    const getCurrentNode = () => {\n      const currentNode2 = store.value.getCurrentNode();\n      return currentNode2 ? currentNode2.data : null;\n    };\n    const getCurrentKey = () => {\n      if (!props.nodeKey)\n        throw new Error(\"[Tree] nodeKey is required in getCurrentKey\");\n      const currentNode2 = getCurrentNode();\n      return currentNode2 ? currentNode2[props.nodeKey] : null;\n    };\n    const setCheckedNodes = (nodes, leafOnly) => {\n      if (!props.nodeKey)\n        throw new Error(\"[Tree] nodeKey is required in setCheckedNodes\");\n      store.value.setCheckedNodes(nodes, leafOnly);\n    };\n    const setCheckedKeys = (keys, leafOnly) => {\n      if (!props.nodeKey)\n        throw new Error(\"[Tree] nodeKey is required in setCheckedKeys\");\n      store.value.setCheckedKeys(keys, leafOnly);\n    };\n    const setChecked = (data, checked, deep) => {\n      store.value.setChecked(data, checked, deep);\n    };\n    const getHalfCheckedNodes = () => {\n      return store.value.getHalfCheckedNodes();\n    };\n    const getHalfCheckedKeys = () => {\n      return store.value.getHalfCheckedKeys();\n    };\n    const setCurrentNode = (node, shouldAutoExpandParent = true) => {\n      if (!props.nodeKey)\n        throw new Error(\"[Tree] nodeKey is required in setCurrentNode\");\n      store.value.setUserCurrentNode(node, shouldAutoExpandParent);\n    };\n    const setCurrentKey = (key, shouldAutoExpandParent = true) => {\n      if (!props.nodeKey)\n        throw new Error(\"[Tree] nodeKey is required in setCurrentKey\");\n      store.value.setCurrentNodeKey(key, shouldAutoExpandParent);\n    };\n    const getNode = (data) => {\n      return store.value.getNode(data);\n    };\n    const remove = (data) => {\n      store.value.remove(data);\n    };\n    const append = (data, parentNode) => {\n      store.value.append(data, parentNode);\n    };\n    const insertBefore = (data, refNode) => {\n      store.value.insertBefore(data, refNode);\n    };\n    const insertAfter = (data, refNode) => {\n      store.value.insertAfter(data, refNode);\n    };\n    const handleNodeExpand = (nodeData, node, instance) => {\n      broadcastExpanded(node);\n      ctx.emit(\"node-expand\", nodeData, node, instance);\n    };\n    const updateKeyChildren = (key, data) => {\n      if (!props.nodeKey)\n        throw new Error(\"[Tree] nodeKey is required in updateKeyChild\");\n      store.value.updateChildren(key, data);\n    };\n    provide(\"RootTree\", {\n      ctx,\n      props,\n      store,\n      root,\n      currentNode,\n      instance: getCurrentInstance()\n    });\n    return {\n      store,\n      root,\n      currentNode,\n      dragState,\n      el$,\n      dropIndicator$,\n      isEmpty,\n      filter,\n      getNodeKey: getNodeKey$1,\n      getNodePath,\n      getCheckedNodes,\n      getCheckedKeys,\n      getCurrentNode,\n      getCurrentKey,\n      setCheckedNodes,\n      setCheckedKeys,\n      setChecked,\n      getHalfCheckedNodes,\n      getHalfCheckedKeys,\n      setCurrentNode,\n      setCurrentKey,\n      t,\n      getNode,\n      remove,\n      append,\n      insertBefore,\n      insertAfter,\n      handleNodeExpand,\n      updateKeyChildren\n    };\n  }\n});\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"el-tree__empty-block\"\n};\nconst _hoisted_2 = { class: \"el-tree__empty-text\" };\nconst _hoisted_3 = {\n  ref: \"dropIndicator$\",\n  class: \"el-tree__drop-indicator\"\n};\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_tree_node = resolveComponent(\"el-tree-node\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el$\",\n    class: normalizeClass([\"el-tree\", {\n      \"el-tree--highlight-current\": _ctx.highlightCurrent,\n      \"is-dragging\": !!_ctx.dragState.draggingNode,\n      \"is-drop-not-allow\": !_ctx.dragState.allowDrop,\n      \"is-drop-inner\": _ctx.dragState.dropType === \"inner\"\n    }]),\n    role: \"tree\"\n  }, [\n    (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.root.childNodes, (child) => {\n      return openBlock(), createBlock(_component_el_tree_node, {\n        key: _ctx.getNodeKey(child),\n        node: child,\n        props: _ctx.props,\n        accordion: _ctx.accordion,\n        \"render-after-expand\": _ctx.renderAfterExpand,\n        \"show-checkbox\": _ctx.showCheckbox,\n        \"render-content\": _ctx.renderContent,\n        onNodeExpand: _ctx.handleNodeExpand\n      }, null, 8, [\"node\", \"props\", \"accordion\", \"render-after-expand\", \"show-checkbox\", \"render-content\", \"onNodeExpand\"]);\n    }), 128)),\n    _ctx.isEmpty ? (openBlock(), createElementBlock(\"div\", _hoisted_1, [\n      createElementVNode(\"span\", _hoisted_2, toDisplayString(_ctx.emptyText || _ctx.t(\"el.tree.emptyText\")), 1)\n    ])) : createCommentVNode(\"v-if\", true),\n    withDirectives(createElementVNode(\"div\", _hoisted_3, null, 512), [\n      [vShow, _ctx.dragState.showDropIndicator]\n    ])\n  ], 2);\n}\n\nscript.render = render;\nscript.__file = \"packages/components/tree/src/tree.vue\";\n\nscript.install = (app) => {\n  app.component(script.name, script);\n};\nconst _Tree = script;\nconst ElTree = _Tree;\n\nexport { ElTree, _Tree as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}